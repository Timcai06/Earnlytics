# Earnlytics åˆ›æ–°åŠŸèƒ½å»ºè®®

**æ–‡æ¡£æ—¥æœŸ**: 2026-02-16  
**ä¼˜å…ˆçº§**: P0-P1  
**çŠ¶æ€**: éƒ¨åˆ†åŠŸèƒ½å·²è½åœ°ï¼ˆæŒç»­è¿­ä»£ï¼‰

---

## âœ… å®ç°æƒ…å†µæ›´æ–° (2026-03-01)

### æ€»ä½“è¿›åº¦
- å·²å®ç°ï¼š3/7ï¼ˆåŠŸèƒ½8ã€åŠŸèƒ½17ã€åŠŸèƒ½18ï¼‰
- éƒ¨åˆ†å®ç°ï¼š3/7ï¼ˆåŠŸèƒ½1ã€åŠŸèƒ½2ã€åŠŸèƒ½6ï¼‰
- æœªå®ç°ï¼š1/7ï¼ˆåŠŸèƒ½10ï¼‰

### åŠŸèƒ½å®ç°è¿½è¸ªè¡¨

| åŠŸèƒ½ | ç›®æ ‡ä¼˜å…ˆçº§ | å½“å‰çŠ¶æ€ | å·²è½åœ°å†…å®¹ | ä¸»è¦ç¼ºå£ | å»ºè®®ä¸‹ä¸€æ­¥ |
|------|-----------|---------|-----------|---------|-----------|
| åŠŸèƒ½1 è´¢æŠ¥æƒ…ç»ªæ—¶é—´è½´ | P0 | ğŸŸ¡ éƒ¨åˆ†å®ç° | å·²æœ‰ç»„ä»¶ä¸æ¥å£ï¼Œå·²åœ¨è´¢æŠ¥è¯¦æƒ…é¡µæ¥å…¥ï¼ˆ`src/components/investment/SentimentTimeline.tsx`ã€`src/app/api/sentiment-history/[symbol]/route.ts`ã€`src/app/earnings/[symbol]/EarningsPageClient.tsx`ï¼‰ | æ–‡æ¡£è¦æ±‚çš„ Dashboard æ¦‚è§ˆå¡ç‰‡æœªæ¥å…¥ | åœ¨ `dashboard` æ–°å¢æƒ…ç»ªè¶‹åŠ¿å¡ï¼Œå¤ç”¨ç°æœ‰æ¥å£ |
| åŠŸèƒ½2 è¶…é¢„æœŸé›·è¾¾ | P0 | ğŸŸ¡ éƒ¨åˆ†å®ç° | å·²æœ‰ Recharts é›·è¾¾ç»„ä»¶å¹¶åœ¨è´¢æŠ¥è¯¦æƒ…é¡µæ¸²æŸ“ï¼ˆ`src/components/investment/SurpriseRadar.tsx`ã€`src/app/earnings/[symbol]/EarningsPageClient.tsx`ï¼‰ | å½“å‰ä¸»è¦ä½¿ç”¨ EPS+è¥æ”¶ï¼Œ5 ç»´æ•°æ®æœªå®Œå…¨å–‚å…¥ï¼›è´¢æŠ¥å¡ç‰‡æ‚¬åœé¢„è§ˆæœªè½åœ° | å®Œå–„æ¯›åˆ©ç‡/å‡€åˆ©æ¶¦/è‡ªç”±ç°é‡‘æµæ•°æ®ç®¡é“ä¸å¡ç‰‡é¢„è§ˆæ¥å…¥ |
| åŠŸèƒ½6 æˆ‘çš„æŒä»“ä»ªè¡¨ç›˜ | P1 | ğŸŸ¡ éƒ¨åˆ†å®ç° | å·²æœ‰æŒä»“é¡µã€æŒä»“ APIã€è´¢æŠ¥æ—¥å†ã€å†å²æ›²çº¿ã€AI ç®€æŠ¥ï¼ˆ`src/app/portfolio/PortfolioPageClient.tsx`ã€`src/app/api/portfolio/*`ã€`supabase/migrations/011-portfolio.sql`ã€`012-portfolio-history.sql`ï¼‰ | æ–‡æ¡£ä¸­â€œæœ€æ–°AIåˆ†ææ±‡æ€»åˆ—è¡¨â€æœªå½¢æˆç‹¬ç«‹æ¨¡å—ï¼›æƒé™ç­–ç•¥éœ€è¿›ä¸€æ­¥æ”¶æ•› | å¢åŠ â€œæŒä»“å…¬å¸æœ€æ–°AIæ‘˜è¦â€å¡ç‰‡å¹¶åŠ å¼ºé‰´æƒ/RLS |
| åŠŸèƒ½8 AIæŠ•èµ„å¤‡å¿˜å½• | P1 | âœ… å·²å®ç°ï¼ˆMVPï¼‰ | å·²è½åœ°æ•°æ®è¡¨ã€ç‰ˆæœ¬å†å²ã€è¯­ä¹‰æ£€ç´¢ã€è´¢æŠ¥é¡µç¼–è¾‘åŒºä¸ç¬”è®°ä¸­å¿ƒï¼ˆ`supabase/migrations/016-user-notes.sql`ã€`src/app/api/notes/*`ã€`src/components/investment/InvestmentMemoPanel.tsx`ã€`src/app/notes/NotesPageClient.tsx`ï¼‰ | ä»ç¼ºâ€œå¯¼å‡ºç¬”è®°/PDFã€å†³ç­–è¿½è¸ªå­—æ®µã€å¼ºé‰´æƒâ€ | å¢åŠ  Supabase Auth çœŸå®ä¼šè¯æ ¡éªŒä¸å¯¼å‡ºèƒ½åŠ› |
| åŠŸèƒ½10 WSBæƒ…ç»ªè¿½è¸ª | P1 | âŒ æœªå®ç° | æš‚æ—  Reddit æŠ“å–ã€æƒ…ç»ªåˆ†æã€`wsb_sentiment` è¡¨ | æ•´ä½“åŠŸèƒ½æœªå¯åŠ¨ | å…ˆåšç¦»çº¿æŠ“å–ä»»åŠ¡ + å­˜å‚¨è¡¨ï¼Œå†åšå‰ç«¯å¯è§†åŒ– |
| åŠŸèƒ½17 3Dè´¢æŠ¥å¡ç‰‡ç¿»è½¬ | P1 | âœ… å·²å®ç° | é¦–é¡µå…¬å¸å¡ç‰‡å·²æ”¯æŒæ‚¬åœ/ç‚¹å‡»ç¿»è½¬ï¼ˆ`src/components/ui/FlipCard.tsx`ã€`src/components/home/LandingDeferredSections.tsx`ï¼‰ | Dashboard å’Œæœç´¢ç»“æœå¤ç”¨åœºæ™¯å°šæœªæ¥å…¥ | å¤ç”¨ç»„ä»¶åˆ° Dashboard æŒä»“å¡ç‰‡ |
| åŠŸèƒ½18 åŠ¨æ€æ•°æ®æµèƒŒæ™¯ | P2 | âœ… å·²å®ç° | é¦–é¡µ Hero å·²æ¥å…¥ Canvas æ•°æ®æµåŠ¨ç”»ï¼ˆ`src/components/ui/DataStreamBackground.tsx`ã€`src/components/home/LandingPageUI.tsx`ï¼‰ | æ–‡æ¡£ä¸­çš„â€œå‡å°‘åŠ¨ç”»æ— éšœç¢é€‰é¡¹/ç§»åŠ¨ç«¯é™çº§ç­–ç•¥â€å°šæœªå®Œå–„ | å¢åŠ  `prefers-reduced-motion` æ£€æµ‹ä¸ç§»åŠ¨ç«¯é™çº§å¼€å…³ |

---

## ğŸ“Š åŠŸèƒ½1: è´¢æŠ¥æƒ…ç»ªæ—¶é—´è½´ (P0)
**å®ç°çŠ¶æ€**: ğŸŸ¡ éƒ¨åˆ†å®ç°

**æ ¸å¿ƒç†å¿µ**: å¯è§†åŒ–å±•ç¤ºå…¬å¸å†å²è´¢æŠ¥æƒ…ç»ªè¶‹åŠ¿ï¼Œè®©ç”¨æˆ·ä¸€çœ¼çœ‹å‡ºå…¬å¸é•¿æœŸè¡¨ç°è½¨è¿¹

### åŠŸèƒ½æè¿°
- å½©è‰²æ—¶é—´è½´å±•ç¤ºè¿‡å»8ä¸ªå­£åº¦çš„è´¢æŠ¥æƒ…ç»ªï¼ˆç§¯æ/ä¸­æ€§/æ¶ˆæï¼‰
- æ‚¬åœæŸ¥çœ‹æ¯ä¸ªå­£åº¦çš„å…³é”®æ•°æ®ï¼ˆè¥æ”¶ã€EPSã€åŒæ¯”å¢é•¿ï¼‰
- è¶‹åŠ¿çº¿æ˜¾ç¤ºæƒ…ç»ªå˜åŒ–æ–¹å‘

### ç”¨æˆ·ä»·å€¼
- å¿«é€Ÿè¯†åˆ«å…¬å¸é•¿æœŸå‘å±•è¶‹åŠ¿
- å‘ç°å­£èŠ‚æ€§æ¨¡å¼æˆ–æ‹ç‚¹
- è¾…åŠ©é•¿æœŸæŠ•èµ„å†³ç­–

### äº¤äº’è®¾è®¡
```
[æ—¶é—´è½´è§†å›¾]
Q1'24 â”€â”€ğŸŸ¢â”€â”€ Q2'24 â”€â”€ğŸŸ¢â”€â”€ Q3'24 â”€â”€ğŸŸ¡â”€â”€ Q4'24 â”€â”€ğŸ”´â”€â”€ Q1'25
         â†“              â†“              â†“              â†“
      EPSè¶…é¢„æœŸ      è¥æ”¶å¢é•¿æ”¾ç¼“     ä¸šç»©æŒå¹³        åˆ©æ¶¦ä¸‹æ»‘
```

### æŠ€æœ¯å®ç°
- ä½¿ç”¨ Recharts æ—¶é—´è½´å›¾è¡¨
- æƒ…ç»ªæ•°æ®æ¥è‡ªç°æœ‰ `ai_analyses.sentiment` å­—æ®µ
- æ”¯æŒç‚¹å‡»è·³è½¬åˆ°å…·ä½“è´¢æŠ¥è¯¦æƒ…é¡µ

### å±•ç¤ºä½ç½®
- å…¬å¸è¯¦æƒ…é¡µé¡¶éƒ¨
- Dashboard æ¦‚è§ˆå¡ç‰‡

---

## ğŸ¯ åŠŸèƒ½2: "è¶…é¢„æœŸ"é›·è¾¾ (P0)
**å®ç°çŠ¶æ€**: ğŸŸ¡ éƒ¨åˆ†å®ç°

**æ ¸å¿ƒç†å¿µ**: é›·è¾¾å›¾å¯è§†åŒ–å±•ç¤ºè´¢æŠ¥å„é¡¹æŒ‡æ ‡ç›¸å¯¹äºé¢„æœŸçš„è¡¨ç°

### åŠŸèƒ½æè¿°
- 5ç»´é›·è¾¾å›¾ï¼šEPSã€è¥æ”¶ã€æ¯›åˆ©ç‡ã€å‡€åˆ©æ¶¦ã€è‡ªç”±ç°é‡‘æµ
- è‡ªåŠ¨æ ‡è®°è¶…é¢„æœŸï¼ˆç»¿è‰²ï¼‰/ä½äºé¢„æœŸï¼ˆçº¢è‰²ï¼‰æŒ‡æ ‡
- æ˜¾ç¤ºé¢„æœŸå€¼ vs å®é™…å€¼å¯¹æ¯”

### ç”¨æˆ·ä»·å€¼
- 5ç§’å†…æŠ“ä½è´¢æŠ¥æ ¸å¿ƒäº®ç‚¹
- å‘ç°éšè—çš„é£é™©ä¿¡å·
- æ¯”æ•°å­—è¡¨æ ¼æ›´ç›´è§‚çš„è®¤çŸ¥

### äº¤äº’è®¾è®¡
```
          EPS
           â”‚
    å‡€åˆ©æ¶¦ â”€â”¼â”€ è¥æ”¶
           â”‚
      è‡ªç”±ç°é‡‘æµ â”€ æ¯›åˆ©ç‡

å®çº¿: å®é™…å€¼
è™šçº¿: é¢„æœŸå€¼
ç»¿è‰²åŒºåŸŸ: è¶…é¢„æœŸæŒ‡æ ‡
çº¢è‰²åŒºåŸŸ: ä½äºé¢„æœŸæŒ‡æ ‡
```

### æŠ€æœ¯å®ç°
- Recharts RadarChart ç»„ä»¶
- æ•°æ®æ¥è‡ª `earnings` è¡¨ï¼ˆeps_estimate, eps_surprise, revenue_yoy_growthï¼‰
- è®¡ç®—é€»è¾‘ï¼šå®é™…å€¼ > é¢„æœŸå€¼ = ç§¯æï¼Œåä¹‹æ¶ˆæ

### å±•ç¤ºä½ç½®
- è´¢æŠ¥è¯¦æƒ…é¡µæ ¸å¿ƒä½ç½®
- è´¢æŠ¥å¡ç‰‡æ‚¬åœé¢„è§ˆ

---

## ğŸ’¼ åŠŸèƒ½6: "æˆ‘çš„æŒä»“"ä»ªè¡¨ç›˜ (P1)
**å®ç°çŠ¶æ€**: ğŸŸ¡ éƒ¨åˆ†å®ç°

**æ ¸å¿ƒç†å¿µ**: è®©ç”¨æˆ·æ·»åŠ è‡ªå·±çš„ç¾è‚¡æŒä»“ï¼Œå®æ—¶è·Ÿè¸ªç›¸å…³è´¢æŠ¥å’ŒAIåˆ†æ

### åŠŸèƒ½æè¿°
- ç”¨æˆ·æ·»åŠ æŒä»“è‚¡ç¥¨ï¼ˆAAPL 100è‚¡ï¼Œæˆæœ¬ä»·$150ï¼‰
- ä¸ªæ€§åŒ–ä»ªè¡¨ç›˜å±•ç¤ºï¼š
  - æŒä»“å…¬å¸æ€»è§ˆï¼ˆå¸‚å€¼ã€ç›ˆäºï¼‰
  - å³å°†å‘å¸ƒçš„è´¢æŠ¥æ—¥å†ï¼ˆä»…æŒä»“å…¬å¸ï¼‰
  - æœ€æ–°AIåˆ†ææ±‡æ€»
  - æ”¶ç›Šç»Ÿè®¡å›¾è¡¨

### ç”¨æˆ·ä»·å€¼
- ä»"çœ‹è´¢æŠ¥"å‡çº§ä¸º"ç®¡ç†æŠ•èµ„ç»„åˆ"
- ä¸é”™è¿‡æŒä»“å…¬å¸çš„ä»»ä½•è´¢æŠ¥
- åŸºäºAIåˆ†æè°ƒæ•´æŒä»“ç­–ç•¥

### äº¤äº’è®¾è®¡
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æˆ‘çš„æŒä»“ Dashboard                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ€»æ”¶ç›Š: +$2,340 (+12.5%) ğŸŸ¢          â”‚
â”‚ æŒä»“: 5å®¶å…¬å¸ | ä»Šæ—¥è´¢æŠ¥: 2å®¶         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“… æœ¬å‘¨è´¢æŠ¥æ—¥å†                       â”‚
â”‚ å‘¨äºŒ: AAPL Q1 - AIåˆ†æå·²ç”Ÿæˆ ğŸŸ¢       â”‚
â”‚ å‘¨å››: NVDA Q4 - å¾…å‘å¸ƒ â³             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“Š AIåˆ†ææ‘˜è¦                         â”‚
â”‚ AAPL: ç§¯æ - iPhoneé”€é‡è¶…é¢„æœŸ         â”‚
â”‚ MSFT: ä¸­æ€§ - Azureå¢é•¿æ”¾ç¼“            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯å®ç°
- æ–°å¢ `user_portfolios` è¡¨ï¼šuser_id, symbol, shares, cost_basis
- æ–°å¢ `user_alerts` è¡¨ï¼šè‡ªå®šä¹‰é¢„è­¦è§„åˆ™
- é›†æˆè‚¡ç¥¨ä»·æ ¼APIï¼ˆå®æ—¶/å»¶æ—¶ï¼‰
- éšç§ï¼šä»…å­˜å‚¨åœ¨ç”¨æˆ·æµè§ˆå™¨æˆ–éœ€ç™»å½•

### æ•°æ®æ¨¡å‹
```sql
-- ç”¨æˆ·æŒä»“è¡¨
CREATE TABLE user_portfolios (
  id SERIAL PRIMARY KEY,
  user_id UUID REFERENCES auth.users,
  symbol TEXT REFERENCES companies(symbol),
  shares DECIMAL(10,2),
  cost_basis DECIMAL(10,2),
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- ç”¨æˆ·è®¾ç½®è¡¨
CREATE TABLE user_settings (
  user_id UUID PRIMARY KEY REFERENCES auth.users,
  notification_email BOOLEAN DEFAULT true,
  notification_wechat BOOLEAN DEFAULT false,
  alert_rules JSONB DEFAULT '[]'
);
```

---

## ğŸ“ åŠŸèƒ½8: AIæŠ•èµ„å¤‡å¿˜å½• (P1)
**å®ç°çŠ¶æ€**: âœ… å·²å®ç°ï¼ˆMVPï¼Œ2026-03-01ï¼‰

**æ ¸å¿ƒç†å¿µ**: ç”¨æˆ·å¯å¯¹æ¯ä»½è´¢æŠ¥å†™ä¸ªäººç¬”è®°ï¼ŒAIè‡ªåŠ¨æ€»ç»“å’Œå…³è”

### åŠŸèƒ½æè¿°
- è´¢æŠ¥è¯¦æƒ…é¡µä¾§è¾¹æ ç¬”è®°åŒº
- æ”¯æŒ Markdown æ ¼å¼è¾“å…¥
- AIè‡ªåŠ¨æå–å…³é”®è¯å’Œæ ‡ç­¾
- è·¨è´¢æŠ¥æœç´¢ä¸ªäººç¬”è®°
- ç¬”è®°ä¸AIåˆ†æè‡ªåŠ¨å…³è”ï¼ˆç›¸ä¼¼è§‚ç‚¹é«˜äº®ï¼‰

### ç”¨æˆ·ä»·å€¼
- å»ºç«‹ä¸ªäººæŠ•èµ„çŸ¥è¯†åº“
- è®°å½•æŠ•èµ„é€»è¾‘ï¼Œå¤ç›˜å†³ç­–
- AIè¾…åŠ©å‘ç°è®¤çŸ¥åå·®

### äº¤äº’è®¾è®¡
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AAPL Q1 2025 è´¢æŠ¥è¯¦æƒ…                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                  â”‚ ğŸ“ æˆ‘çš„æŠ•èµ„å¤‡å¿˜å½•     â”‚
â”‚ [è´¢æŠ¥æ•°æ®å›¾è¡¨]                    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                  â”‚ ğŸ·ï¸ æ ‡ç­¾: #ä¼°å€¼åé«˜     â”‚
â”‚ [AIåˆ†ææ‘˜è¦]                     â”‚                      â”‚
â”‚                                  â”‚ ç¬”è®°å†…å®¹:             â”‚
â”‚ [é›·è¾¾å›¾]                         â”‚ "è™½ç„¶è¥æ”¶è¶…é¢„æœŸï¼Œä½†    â”‚
â”‚                                  â”‚  æ¯›åˆ©ç‡ä¸‹æ»‘å€¼å¾—è­¦æƒ•ã€‚  â”‚
â”‚                                  â”‚  è€ƒè™‘å‡ä»“è‡³50è‚¡ã€‚"     â”‚
â”‚                                  â”‚                      â”‚
â”‚                                  â”‚ ğŸ¤– AIå…³è”:            â”‚
â”‚                                  â”‚ "AIåˆ†æä¹Ÿæåˆ°åˆ©æ¶¦ç‡    â”‚
â”‚                                  â”‚  å‹åŠ›ï¼Œä¸æ‚¨è§‚ç‚¹ä¸€è‡´"   â”‚
â”‚                                  â”‚                      â”‚
â”‚                                  â”‚ [ä¿å­˜] [æŸ¥çœ‹å†å²ç¬”è®°]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯å®ç°
- æ–°å¢ `user_notes`ã€`user_note_versions`ã€`user_note_embeddings`ï¼ˆ`supabase/migrations/016-user-notes.sql`ï¼‰
- APIï¼š`/api/notes`ã€`/api/notes/search`ã€`/api/notes/[noteId]/versions`ã€`/api/notes/[noteId]/restore`
- å‰ç«¯ï¼š`InvestmentMemoPanel`ï¼ˆMarkdown ç¼–è¾‘/é¢„è§ˆã€è‡ªåŠ¨æ ‡ç­¾ã€å†å²æ¢å¤ï¼‰å·²æ¥å…¥è´¢æŠ¥é¡µä¸åˆ†æé¡µ
- AIå…³è”ï¼šç¬”è®°ä¸ AI åˆ†æä¸Šä¸‹æ–‡åš embedding ç›¸ä¼¼åº¦ï¼Œå†™å…¥ `ai_alignment_score/summary`
- å¤‡å¿˜å½•ä¸­å¿ƒï¼š`/notes` æ”¯æŒè·¨è´¢æŠ¥æ£€ç´¢å¹¶å›è·³åˆ°å¯¹åº”è´¢æŠ¥ç¬”è®°é”šç‚¹

### é«˜çº§åŠŸèƒ½ï¼ˆæœªæ¥ï¼‰
- AIå®šæœŸå›é¡¾ç”¨æˆ·ç¬”è®°ï¼Œç”ŸæˆæŠ•èµ„ç­–ç•¥æ€»ç»“
- å‘ç°ç”¨æˆ·ç¬”è®°ä¸AIåˆ†æçš„ç³»ç»Ÿæ€§åå·®

---

## ğŸ‚ åŠŸèƒ½10: WallStreetBets æƒ…ç»ªè¿½è¸ª (P1)
**å®ç°çŠ¶æ€**: âŒ æœªå®ç°

**æ ¸å¿ƒç†å¿µ**: è¿½è¸ª Reddit WSB æ¿å—å¯¹ç‰¹å®šè‚¡ç¥¨çš„è®¨è®ºçƒ­åº¦ä¸æƒ…ç»ª

### åŠŸèƒ½æè¿°
- å®æ—¶æŠ“å– r/wallstreetbets æåŠç‰¹å®šè‚¡ç¥¨çš„å¸–å­
- æƒ…ç»ªåˆ†æï¼šçœ‹æ¶¨/çœ‹è·Œ/ä¸­æ€§
- çƒ­åº¦æŒ‡æ ‡ï¼šæåŠæ¬¡æ•°ã€ç‚¹èµæ•°ã€è¯„è®ºæ´»è·ƒåº¦
- çƒ­é—¨å¸–å­èšåˆï¼ˆä¸­æ–‡æ‘˜è¦ï¼‰

### ç”¨æˆ·ä»·å€¼
- æ•æ‰æ•£æˆ·æƒ…ç»ªï¼Œå‘ç°å¸‚åœºæç«¯æƒ…ç»ªä¿¡å·
- äº†è§£ç¾å›½æ•£æˆ·å¯¹ä¸­æ¦‚è‚¡/ç§‘æŠ€è‚¡çš„çœ‹æ³•
- åå‘æŒ‡æ ‡ï¼šå½“WSBæåº¦çœ‹æ¶¨æ—¶å¯èƒ½æ˜¯é¡¶éƒ¨ä¿¡å·

### äº¤äº’è®¾è®¡
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WSB æƒ…ç»ªä»ªè¡¨ç›˜ - AAPL                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚   æƒ…ç»ªæŒ‡æ•°: [==========] 75% ğŸ‚     â”‚
â”‚   (çœ‹æ¶¨)                             â”‚
â”‚                                     â”‚
â”‚   24hæåŠ: 234æ¬¡  ğŸ”¥çƒ­åº¦: é«˜         â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“° çƒ­é—¨å¸–å­                          â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ ğŸš€ "AAPL to the moon! æˆ‘å…¨æŠ¼äº†"      â”‚
â”‚    ç‚¹èµ: 1.2k | è¯„è®º: 234           â”‚
â”‚    æƒ…ç»ª: ğŸŸ¢ æåº¦çœ‹æ¶¨                 â”‚
â”‚                                     â”‚
â”‚ ğŸ¤” "Tim Cookæ˜¯ä¸æ˜¯è¯¥é€€ä¼‘äº†ï¼Ÿ"        â”‚
â”‚    ç‚¹èµ: 456 | è¯„è®º: 89             â”‚
â”‚    æƒ…ç»ª: ğŸŸ¡ ä¸­æ€§è®¨è®º                 â”‚
â”‚                                     â”‚
â”‚ [æŸ¥çœ‹æ›´å¤šå¸–å­]                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯å®ç°
- Reddit API (PRAW) å®šæ—¶æŠ“å–
- NLPæƒ…ç»ªåˆ†ææ¨¡å‹ï¼ˆå¯å¤ç”¨ç°æœ‰DeepSeekè°ƒç”¨ï¼‰
- æ•°æ®å­˜å‚¨ï¼šæ–°å¢ `wsb_sentiment` è¡¨
- æ›´æ–°é¢‘ç‡ï¼šæ¯4å°æ—¶ï¼ˆä¸è´¢æŠ¥åŒæ­¥ï¼‰

### æ•°æ®æ¨¡å‹
```sql
CREATE TABLE wsb_sentiment (
  id SERIAL PRIMARY KEY,
  symbol TEXT REFERENCES companies(symbol),
  mentions_24h INTEGER DEFAULT 0,
  sentiment_score DECIMAL(3,2), -- -1.0 to 1.0
  trending_posts JSONB,
  analyzed_at TIMESTAMPTZ DEFAULT NOW()
);
```

### é£é™©æç¤º
- å…è´£å£°æ˜ï¼š"WSBæƒ…ç»ªä»…ä½œå‚è€ƒï¼Œä¸æ„æˆæŠ•èµ„å»ºè®®"
- æç«¯æƒ…ç»ªé¢„è­¦ï¼šå½“æƒ…ç»ª>90%æˆ–<-90%æ—¶æ˜¾ç¤ºè­¦å‘Š

---

## ğŸ´ åŠŸèƒ½17: 3Dè´¢æŠ¥å¡ç‰‡ç¿»è½¬ (P1)
**å®ç°çŠ¶æ€**: âœ… å·²å®ç°ï¼ˆé¦–é¡µåœºæ™¯ï¼‰

**æ ¸å¿ƒç†å¿µ**: ä¿¡æ¯å¯†åº¦é«˜çš„äº¤äº’å¼å¡ç‰‡è®¾è®¡ï¼Œæ­£é¢æ¦‚è§ˆ+èƒŒé¢è¯¦æƒ…

### åŠŸèƒ½æè¿°
- å…¬å¸å¡ç‰‡æ­£é¢ï¼šLogoã€åç§°ã€æœ€æ–°è‚¡ä»·ã€å½“æ—¥æ¶¨è·Œ
- å¡ç‰‡èƒŒé¢ï¼šæœ€æ–°è´¢æŠ¥æ ¸å¿ƒæ•°æ®ã€AIæƒ…ç»ªã€å…³é”®æŒ‡æ ‡
- 3Dç¿»è½¬åŠ¨ç”»ï¼Œé¼ æ ‡æ‚¬åœæˆ–ç‚¹å‡»ç¿»è½¬

### ç”¨æˆ·ä»·å€¼
- é¦–é¡µä¿¡æ¯å¯†åº¦æå‡2å€
- æœ‰è¶£çš„äº¤äº’å¢åŠ åœç•™æ—¶é—´
- æ¸è¿›å¼ä¿¡æ¯æŠ«éœ²ï¼Œä¸ overwhelm ç”¨æˆ·

### äº¤äº’è®¾è®¡
```
æ­£é¢ï¼ˆé»˜è®¤æ˜¾ç¤ºï¼‰:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   [å…¬å¸Logo]      â”‚
â”‚                  â”‚
â”‚     AAPL         â”‚
â”‚   Apple Inc.     â”‚
â”‚                  â”‚
â”‚   $182.50       â”‚
â”‚   +1.2% ğŸŸ¢       â”‚
â”‚                  â”‚
â”‚  [Hoverç¿»è½¬]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

èƒŒé¢ï¼ˆç¿»è½¬åï¼‰:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š æœ€æ–°è´¢æŠ¥ Q1    â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ æƒ…ç»ª: ğŸŸ¢ ç§¯æ     â”‚
â”‚ EPS: $2.18 (+15%) â”‚
â”‚ è¥æ”¶: $120B (+8%) â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ AIè§‚ç‚¹: è¶…é¢„æœŸ    â”‚
â”‚ [æŸ¥çœ‹å®Œæ•´åˆ†æ â†’]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯å®ç°
```css
/* CSS 3D Transform */
.card-container {
  perspective: 1000px;
}

.card {
  transform-style: preserve-3d;
  transition: transform 0.6s;
}

.card:hover {
  transform: rotateY(180deg);
}

.card-front, .card-back {
  backface-visibility: hidden;
}

.card-back {
  transform: rotateY(180deg);
}
```

### åº”ç”¨åœºæ™¯
- é¦–é¡µå…¬å¸ç½‘æ ¼å±•ç¤º
- Dashboard æŒä»“æ¦‚è§ˆ
- æœç´¢ç»“æœå¡ç‰‡

---

## âœ¨ åŠŸèƒ½18: åŠ¨æ€æ•°æ®æµèƒŒæ™¯ (P2)
**å®ç°çŠ¶æ€**: âœ… å·²å®ç°ï¼ˆé¦–é¡µ Heroï¼‰

**æ ¸å¿ƒç†å¿µ**: ç§‘æŠ€æ„ŸèƒŒæ™¯åŠ¨ç”»ï¼Œå®æ—¶å±•ç¤ºè´¢æŠ¥æ•°æ®æµåŠ¨

### åŠŸèƒ½æè¿°
- é¦–é¡µ Hero Section èƒŒæ™¯å±‚
- å®æ—¶æ»šåŠ¨çš„è´¢æŠ¥æ•°æ®æµï¼ˆç±»ä¼¼ã€Šé»‘å®¢å¸å›½ã€‹æ•°å­—é›¨æ•ˆæœï¼‰
- æ•°æ®åŒ…æ‹¬ï¼šå…¬å¸åç§°ã€è¥æ”¶æ•°å­—ã€EPSã€æƒ…ç»ªè¡¨æƒ…ç­‰
- æš—è‰²ä¸»é¢˜ï¼Œä½é€æ˜åº¦ï¼Œä¸å¹²æ‰°ä¸»è¦å†…å®¹

### ç”¨æˆ·ä»·å€¼
- ç¬¬ä¸€çœ¼å³æ„Ÿå—"AI+æ•°æ®"çš„ä¸“ä¸šå®šä½
- ç›¸æ¯”é™æ€èƒŒæ™¯æ›´æœ‰è®°å¿†ç‚¹
- å¢åŠ é¡µé¢åœç•™æ—¶é•¿

### è§†è§‰æ•ˆæœ
```
èƒŒæ™¯å±‚ï¼ˆ30%é€æ˜åº¦ï¼‰:

    AAPL  $120B  ğŸŸ¢   MSFT  $65B   ğŸŸ¢
         â†“           â†“           â†“
    NVDA  $25B   ğŸŸ¢   AMZN  $170B  ğŸŸ¡
         â†“           â†“           â†“
    META  $40B   ğŸŸ¢   GOOGL $85B   ğŸŸ¢
         â†“           â†“           â†“

åŠ¨ç”»æ•ˆæœ:
- æ•°æ®ä»å±å¹•é¡¶éƒ¨å‘åº•éƒ¨æµåŠ¨
- é€Ÿåº¦éšæœºï¼Œæ¨¡æ‹ŸçœŸå®æ•°æ®æµ
- é¼ æ ‡ç§»åŠ¨æ—¶äº§ç”Ÿè½»å¾®è§†å·®æ•ˆæœ
```

### æŠ€æœ¯å®ç°
```typescript
// Canvas åŠ¨ç”»
const canvas = document.getElementById('data-stream');
const ctx = canvas.getContext('2d');

interface DataParticle {
  x: number;
  y: number;
  text: string;
  speed: number;
  opacity: number;
}

// å®æ—¶è´¢æŠ¥æ•°æ®
const dataStream = [
  { symbol: 'AAPL', revenue: '$120B', sentiment: 'ğŸŸ¢' },
  { symbol: 'MSFT', revenue: '$65B', sentiment: 'ğŸŸ¢' },
  // ... æ›´å¤šæ•°æ®
];

// åŠ¨ç”»å¾ªç¯
function animate() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  
  particles.forEach(particle => {
    particle.y += particle.speed;
    ctx.globalAlpha = particle.opacity;
    ctx.fillText(particle.text, particle.x, particle.y);
  });
  
  requestAnimationFrame(animate);
}
```

### æ€§èƒ½ä¼˜åŒ–
- ä½¿ç”¨ `requestAnimationFrame` ç¡®ä¿æµç•…
- æ•°æ®é‡æ§åˆ¶åœ¨50-100ä¸ªç²’å­
- ç§»åŠ¨ç«¯ç®€åŒ–æˆ–ç¦ç”¨
- æä¾›"å‡å°‘åŠ¨ç”»"æ— éšœç¢é€‰é¡¹

### å“åº”å¼è®¾è®¡
- æ¡Œé¢ç«¯ï¼šå…¨å±æ•°æ®æµèƒŒæ™¯
- å¹³æ¿ï¼šé™ä½ç²’å­å¯†åº¦
- æ‰‹æœºï¼šé™æ€æ¸å˜èƒŒæ™¯ï¼ˆè€ƒè™‘æ€§èƒ½ï¼‰

---

## ğŸ“‹ å®ç°ä¼˜å…ˆçº§ä¸ä¾èµ–

| åŠŸèƒ½ | ä¼˜å…ˆçº§ | ä¾èµ– | é¢„è®¡å·¥æ—¶ | å½±å“é¢ |
|------|--------|------|---------|--------|
| è´¢æŠ¥æƒ…ç»ªæ—¶é—´è½´ | P0 | ç°æœ‰æ•°æ® | 8h | å…¬å¸è¯¦æƒ…é¡µ |
| "è¶…é¢„æœŸ"é›·è¾¾ | P0 | ç°æœ‰æ•°æ® | 12h | è´¢æŠ¥é¡µ |
| 3Dè´¢æŠ¥å¡ç‰‡ç¿»è½¬ | P1 | å‰ç«¯CSS | 6h | é¦–é¡µ |
| åŠ¨æ€æ•°æ®æµèƒŒæ™¯ | P2 | Canvas | 8h | é¦–é¡µ |
| æˆ‘çš„æŒä»“ä»ªè¡¨ç›˜ | P1 | ç”¨æˆ·ç³»ç»Ÿ | 24h | å…¨ç«™ |
| AIæŠ•èµ„å¤‡å¿˜å½• | P1 | å‘é‡åµŒå…¥ | 16h | è´¢æŠ¥é¡µ |
| WSBæƒ…ç»ªè¿½è¸ª | P1 | Reddit API | 20h | å…¬å¸è¯¦æƒ…é¡µ |

---

## ğŸ¯ æ¨èå®æ–½è·¯å¾„

### Phase 1 (æœ¬å‘¨): è§†è§‰å¢å¼º
1. **3Dè´¢æŠ¥å¡ç‰‡ç¿»è½¬** - å¿«é€Ÿæå‡é¦–é¡µè´¨æ„Ÿ
2. **"è¶…é¢„æœŸ"é›·è¾¾** - å¼ºåŒ–è´¢æŠ¥é¡µæ ¸å¿ƒåŠŸèƒ½

### Phase 2 (ä¸‹å‘¨): æ•°æ®å¯è§†åŒ–
3. **è´¢æŠ¥æƒ…ç»ªæ—¶é—´è½´** - åˆ©ç”¨ç°æœ‰æƒ…ç»ªæ•°æ®
4. **åŠ¨æ€æ•°æ®æµèƒŒæ™¯** - é¦–é¡µè§†è§‰å‡çº§

### Phase 3 (ä¸‹æœˆ): ç”¨æˆ·åŠŸèƒ½
5. **æˆ‘çš„æŒä»“ä»ªè¡¨ç›˜** - éœ€è¦ç”¨æˆ·ç™»å½•ç³»ç»Ÿ
6. **AIæŠ•èµ„å¤‡å¿˜å½•** - å¢å¼ºç”¨æˆ·ç²˜æ€§
7. **WSBæƒ…ç»ªè¿½è¸ª** - å·®å¼‚åŒ–å†…å®¹

---

## ğŸ’¡ è¡¥å……å»ºè®®

### ç»„åˆæ•ˆæœç¤ºä¾‹
è¿™äº›åŠŸèƒ½å¯ä»¥ç»„åˆäº§ç”Ÿæ›´å¼ºçš„æ•ˆæœï¼š

**åœºæ™¯**: ç”¨æˆ·æŸ¥çœ‹ AAPL è´¢æŠ¥
1. é¦–é¡µ 3Då¡ç‰‡ç¿»è½¬æ˜¾ç¤ºæ ¸å¿ƒæ•°æ®
2. è¿›å…¥è¯¦æƒ…é¡µçœ‹åˆ° "è¶…é¢„æœŸ"é›·è¾¾å›¾
3. å‘ä¸‹æ»šåŠ¨çœ‹åˆ°æƒ…ç»ªæ—¶é—´è½´è¶‹åŠ¿
4. å³ä¾§è¾¹æ çœ‹åˆ° WSB æ•£æˆ·æƒ…ç»ª
5. ç”¨æˆ·è®°å½• AIæŠ•èµ„å¤‡å¿˜å½•
6. æ·»åŠ åˆ°"æˆ‘çš„æŒä»“"è·Ÿè¸ª

**åœºæ™¯**: è´¢æŠ¥å‘å¸ƒæ—¥
1. åŠ¨æ€æ•°æ®æµèƒŒæ™¯é«˜äº®ä»Šæ—¥è´¢æŠ¥å…¬å¸
2. ç”¨æˆ·æŒä»“å…¬å¸å¡ç‰‡é—ªçƒæé†’
3. å‘å¸ƒåé›·è¾¾å›¾å®æ—¶æ›´æ–°
4. AIåˆ†æç”Ÿæˆåæ¨é€é€šçŸ¥

---

---

# ğŸ“‹ è¯¦ç»†è®¾è®¡æ–‡æ¡£ (PRD)

## åŠŸèƒ½1: è´¢æŠ¥æƒ…ç»ªæ—¶é—´è½´ - è¯¦ç»†è®¾è®¡

### 1.1 äº§å“éœ€æ±‚æ–‡æ¡£ (PRD)

**åŠŸèƒ½åç§°**: è´¢æŠ¥æƒ…ç»ªæ—¶é—´è½´ (Earnings Sentiment Timeline)  
**ç‰ˆæœ¬**: 1.0  
**çŠ¶æ€**: è§„åˆ’  
**è´Ÿè´£äºº**: å‰ç«¯å¼€å‘ + æ•°æ®å·¥ç¨‹å¸ˆ

#### ç”¨æˆ·æ•…äº‹
- ä½œä¸ºæŠ•èµ„è€…ï¼Œæˆ‘æƒ³çœ‹åˆ°å…¬å¸è¿‡å»8ä¸ªå­£åº¦çš„è´¢æŠ¥æƒ…ç»ªè¶‹åŠ¿ï¼Œä»¥ä¾¿è¯†åˆ«é•¿æœŸå‘å±•è¶‹åŠ¿
- ä½œä¸ºåˆ†æå¸ˆï¼Œæˆ‘æƒ³å¿«é€Ÿå‘ç°å…¬å¸ä¸šç»©çš„å­£èŠ‚æ€§æ¨¡å¼æˆ–æ‹ç‚¹
- ä½œä¸ºæ–°ç”¨æˆ·ï¼Œæˆ‘æƒ³é€šè¿‡å¯è§†åŒ–å¿«é€Ÿäº†è§£ä¸€å®¶å…¬å¸çš„å†å²è¡¨ç°

#### åŠŸèƒ½éœ€æ±‚

**FR-1.1.1 åŸºç¡€å±•ç¤º**
- ä»¥æ—¶é—´è½´å½¢å¼å±•ç¤ºè¿‡å»8ä¸ªå­£åº¦çš„è´¢æŠ¥æƒ…ç»ª
- æ¯ä¸ªèŠ‚ç‚¹æ˜¾ç¤ºå­£åº¦æ ‡è¯†ï¼ˆQ1'24, Q2'24ç­‰ï¼‰
- æƒ…ç»ªçŠ¶æ€ç”¨é¢œè‰²æ ‡è¯†ï¼šç§¯æ(ç»¿è‰²)ã€ä¸­æ€§(é»„è‰²)ã€æ¶ˆæ(çº¢è‰²)

**FR-1.1.2 äº¤äº’åŠŸèƒ½**
- é¼ æ ‡æ‚¬åœæ˜¾ç¤ºè¯¦ç»†æ•°æ®æµ®å±‚ï¼šè¥æ”¶ã€EPSã€åŒæ¯”å¢é•¿ç‡ã€AIæ‘˜è¦å‰50å­—
- ç‚¹å‡»èŠ‚ç‚¹è·³è½¬åˆ°è¯¥å­£åº¦è´¢æŠ¥è¯¦æƒ…é¡µ
- æ”¯æŒå·¦å³æ»‘åŠ¨æŸ¥çœ‹æ›´æ—©å­£åº¦

**FR-1.1.3 è¶‹åŠ¿åˆ†æ**
- è‡ªåŠ¨è®¡ç®—å¹¶æ˜¾ç¤ºè¶‹åŠ¿çº¿ï¼ˆè¿ç»­ç§¯æ/æ¶ˆæçš„è¿çº¿ï¼‰
- æ ‡è®°é‡è¦è½¬æŠ˜ç‚¹ï¼ˆæƒ…ç»ªä»ç§¯æè½¬ä¸ºæ¶ˆææˆ–åä¹‹ï¼‰
- æ˜¾ç¤ºæƒ…ç»ªå˜åŒ–ç™¾åˆ†æ¯”ç»Ÿè®¡

#### éåŠŸèƒ½éœ€æ±‚
- åŠ è½½æ—¶é—´ < 500ms
- æ”¯æŒç§»åŠ¨ç«¯è§¦æ‘¸æ“ä½œ
- åŠ¨ç”»æµç•…åº¦ 60fps

### 1.2 æŠ€æœ¯æ–¹æ¡ˆ

#### æ¶æ„è®¾è®¡
```
[è´¢æŠ¥è¯¦æƒ…é¡µ]
    â”‚
    â”œâ”€> æƒ…ç»ªæ—¶é—´è½´ç»„ä»¶ (SentimentTimeline.tsx)
    â”‚       â”‚
    â”‚       â”œâ”€> API: GET /api/companies/[symbol]/sentiment-history
    â”‚       â”‚       â””â”€> æŸ¥è¯¢: earnings + ai_analyses è¡¨
    â”‚       â”‚
    â”‚       â””â”€> å­ç»„ä»¶:
    â”‚           â”œâ”€ TimelineNode (å•ä¸ªèŠ‚ç‚¹)
    â”‚           â”œâ”€ TrendLine (è¶‹åŠ¿çº¿)
    â”‚           â”œâ”€ DetailTooltip (è¯¦æƒ…æµ®å±‚)
    â”‚           â””â”€ AnimationWrapper (åŠ¨ç”»åŒ…è£…)
    â”‚
    â””â”€> çŠ¶æ€ç®¡ç†: React useState + useEffect
```

#### APIè®¾è®¡
```typescript
// GET /api/companies/[symbol]/sentiment-history
interface SentimentHistoryResponse {
  symbol: string;
  quarters: Array<{
    quarter: string;        // "Q1 2024"
    fiscal_year: number;
    fiscal_quarter: number;
    sentiment: 'positive' | 'neutral' | 'negative';
    revenue: number | null;
    eps: number | null;
    revenue_yoy_growth: number | null;
    eps_surprise: number | null;
    ai_summary_preview: string;  // å‰50å­—
    earning_id: number;
    report_date: string;
  }>;
  trend_analysis: {
    positive_streak: number;     // è¿ç»­ç§¯æå­£åº¦æ•°
    negative_streak: number;     // è¿ç»­æ¶ˆæå­£åº¦æ•°
    sentiment_changes: number;   // æƒ…ç»ªå˜åŒ–æ¬¡æ•°
    overall_trend: 'improving' | 'declining' | 'stable';
  };
}
```

#### ç»„ä»¶æ¥å£
```typescript
// SentimentTimeline.tsx
interface SentimentTimelineProps {
  symbol: string;
  maxQuarters?: number;  // é»˜è®¤8
  showTrendLine?: boolean;  // é»˜è®¤true
  onQuarterClick?: (quarter: QuarterData) => void;
  className?: string;
}

// TimelineNode.tsx
interface TimelineNodeProps {
  data: QuarterData;
  isActive: boolean;
  position: 'first' | 'middle' | 'last';
  onClick: () => void;
}
```

### 1.3 æ•°æ®æ¨¡å‹

```sql
-- ç°æœ‰è¡¨å·²æ”¯æŒï¼Œæ— éœ€æ–°è¡¨
-- earnings è¡¨æä¾›: revenue, eps, revenue_yoy_growth, eps_surprise
-- ai_analyses è¡¨æä¾›: sentiment, summary

-- å¯é€‰ï¼šæ·»åŠ ç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢
CREATE INDEX IF NOT EXISTS idx_earnings_company_date 
ON earnings(company_id, report_date DESC);

CREATE INDEX IF NOT EXISTS idx_ai_analyses_earning 
ON ai_analyses(earning_id);
```

### 1.4 UIè®¾è®¡è§„èŒƒ

```typescript
// é¢œè‰²é…ç½® (ä½¿ç”¨ç°æœ‰tokens)
const sentimentColors = {
  positive: {
    node: 'bg-success',
    border: 'border-success',
    glow: 'shadow-[var(--shadow-focus-success)]',
    line: 'stroke-success'
  },
  neutral: {
    node: 'bg-warning', 
    border: 'border-warning',
    glow: 'shadow-[var(--shadow-glow-sm)]',
    line: 'stroke-warning'
  },
  negative: {
    node: 'bg-error',
    border: 'border-error', 
    glow: 'shadow-[var(--shadow-glow-sm)]',
    line: 'stroke-error'
  }
};

// å°ºå¯¸è§„èŒƒ
const dimensions = {
  nodeSize: 'w-4 h-4',           // èŠ‚ç‚¹ç›´å¾„
  lineHeight: 'h-0.5',           // è¿çº¿ç²—ç»†
  timelinePadding: 'py-8',       // ä¸Šä¸‹å†…è¾¹è·
  nodeGap: 'gap-8',              // èŠ‚ç‚¹é—´è·
  tooltipMaxWidth: 'max-w-xs'    // æµ®å±‚æœ€å¤§å®½åº¦
};
```

### 1.5 æµ‹è¯•ç”¨ä¾‹

| ç”¨ä¾‹ID | åœºæ™¯ | é¢„æœŸç»“æœ | ä¼˜å…ˆçº§ |
|--------|------|---------|--------|
| TC-1.1 | åŠ è½½AAPLæƒ…ç»ªæ—¶é—´è½´ | æ˜¾ç¤ºæœ€è¿‘8ä¸ªå­£åº¦ï¼ŒèŠ‚ç‚¹é¢œè‰²æ­£ç¡® | P0 |
| TC-1.2 | æ‚¬åœåœ¨Q2'24èŠ‚ç‚¹ | æ˜¾ç¤ºæµ®å±‚ï¼ŒåŒ…å«è¥æ”¶EPSæ•°æ® | P0 |
| TC-1.3 | ç‚¹å‡»Q3'24èŠ‚ç‚¹ | è·³è½¬åˆ°è¯¥å­£åº¦è´¢æŠ¥è¯¦æƒ…é¡µ | P0 |
| TC-1.4 | æ•°æ®ç¼ºå¤±å­£åº¦ | æ˜¾ç¤ºç°è‰²å ä½èŠ‚ç‚¹ï¼Œæç¤º"æ•°æ®ç¼ºå¤±" | P1 |
| TC-1.5 | ç§»åŠ¨ç«¯è§¦æ‘¸æ»‘åŠ¨ | å¯å·¦å³æ»‘åŠ¨æŸ¥çœ‹æ›´æ—©å­£åº¦ | P1 |

---

## åŠŸèƒ½2: "è¶…é¢„æœŸ"é›·è¾¾ - è¯¦ç»†è®¾è®¡

### 2.1 äº§å“éœ€æ±‚æ–‡æ¡£ (PRD)

**åŠŸèƒ½åç§°**: è¶…é¢„æœŸé›·è¾¾ (Earnings Surprise Radar)  
**ç‰ˆæœ¬**: 1.0  
**çŠ¶æ€**: è§„åˆ’

#### ç”¨æˆ·æ•…äº‹
- ä½œä¸ºæŠ•èµ„è€…ï¼Œæˆ‘æƒ³åœ¨5ç§’å†…çœ‹åˆ°è´¢æŠ¥å“ªäº›æŒ‡æ ‡è¶…é¢„æœŸï¼Œå“ªäº›ä½äºé¢„æœŸ
- ä½œä¸ºåˆ†æå¸ˆï¼Œæˆ‘æƒ³é€šè¿‡å¯è§†åŒ–å¿«é€Ÿå‘ç°è´¢æŠ¥çš„äº®ç‚¹å’Œé£é™©
- ä½œä¸ºæ–°æ‰‹ï¼Œæˆ‘æƒ³ç›´è§‚åœ°ç†è§£è´¢æŠ¥ç›¸å¯¹äºå¸‚åœºé¢„æœŸçš„è¡¨ç°

#### åŠŸèƒ½éœ€æ±‚

**FR-2.1.1 é›·è¾¾å›¾å±•ç¤º**
- 5ç»´é›·è¾¾å›¾ï¼šEPSã€è¥æ”¶ã€æ¯›åˆ©ç‡ã€å‡€åˆ©æ¶¦ã€è‡ªç”±ç°é‡‘æµ
- æ¯ä¸ªç»´åº¦çš„åˆ»åº¦ï¼š0-100%ï¼Œè¡¨ç¤ºç›¸å¯¹äºé¢„æœŸçš„ç™¾åˆ†æ¯”
- ä¸­å¿ƒç‚¹è¡¨ç¤ºé¢„æœŸå€¼ï¼Œå¤–å›´è¡¨ç¤ºå®é™…å€¼

**FR-2.1.2 åŒå›¾å±‚å¯¹æ¯”**
- å®çº¿ï¼šå®é™…å€¼å›¾å±‚
- è™šçº¿ï¼šé¢„æœŸå€¼å›¾å±‚ï¼ˆå‚è€ƒåœ†ï¼‰
- ä¸¤çº¿ä¹‹é—´çš„åŒºåŸŸè¡¨ç¤ºè¶…é¢„æœŸæˆ–ä½äºé¢„æœŸ

**FR-2.1.3 è‡ªåŠ¨æ ‡æ³¨**
- ç»¿è‰²å¡«å……ï¼šå®é™…å€¼ > é¢„æœŸå€¼ï¼ˆè¶…é¢„æœŸï¼‰
- çº¢è‰²å¡«å……ï¼šå®é™…å€¼ < é¢„æœŸå€¼ï¼ˆä½äºé¢„æœŸï¼‰
- æ•°å€¼æ ‡ç­¾æ˜¾ç¤ºæ¯ä¸ªç»´åº¦çš„å®é™…å€¼å’Œé¢„æœŸå€¼

**FR-2.1.4 äº¤äº’åŠŸèƒ½**
- æ‚¬åœåœ¨ç»´åº¦ä¸Šæ˜¾ç¤ºè¯¦ç»†å¯¹æ¯”æ•°æ®
- ç‚¹å‡»ç»´åº¦å±•å¼€è¯¥æŒ‡æ ‡çš„è¯¦ç»†åˆ†æ
- åŠ¨ç”»å…¥åœºæ•ˆæœï¼ˆä»ä¸­å¿ƒå‘å¤–å±•å¼€ï¼‰

#### éåŠŸèƒ½éœ€æ±‚
- å›¾è¡¨å“åº”å¼ï¼Œé€‚é…å„ç§å±å¹•
- åŠ¨ç”»æ—¶é•¿ 800msï¼Œç¼“åŠ¨å‡½æ•° ease-out
- è‰²ç›²å‹å¥½ï¼šä½¿ç”¨å½¢çŠ¶+é¢œè‰²åŒé‡ç¼–ç 

### 2.2 æŠ€æœ¯æ–¹æ¡ˆ

#### æ¶æ„è®¾è®¡
```
[è´¢æŠ¥è¯¦æƒ…é¡µ]
    â”‚
    â”œâ”€> è¶…é¢„æœŸé›·è¾¾ç»„ä»¶ (SurpriseRadar.tsx)
    â”‚       â”‚
    â”‚       â”œâ”€> Recharts RadarChart
    â”‚       â”‚       â”œâ”€> Radar (å®é™…å€¼)
    â”‚       â”‚       â””â”€> Radar (é¢„æœŸå€¼)
    â”‚       â”‚
    â”‚       â”œâ”€> æ•°æ®å¤„ç†å±‚
    â”‚       â”‚       â””â”€> calculateSurpriseMetrics()
    â”‚       â”‚
    â”‚       â””â”€> äº¤äº’å±‚
    â”‚           â”œâ”€> DimensionTooltip
    â”‚           â””â”€> AnimationController
    â”‚
    â””â”€> æ•°æ®æº: earnings è¡¨
```

#### æ•°æ®å¤„ç†é€»è¾‘
```typescript
// è®¡ç®—è¶…é¢„æœŸæŒ‡æ ‡
interface SurpriseMetrics {
  eps: {
    actual: number;
    expected: number;
    surprise_pct: number;      // (actual - expected) / expected * 100
    status: 'beat' | 'miss' | 'meet';
  };
  revenue: {
    actual: number;
    expected: number | null;
    surprise_pct: number;
    status: 'beat' | 'miss' | 'meet';
  };
  // ... å…¶ä»–ç»´åº¦
}

function calculateSurpriseMetrics(earning: Earning): SurpriseMetrics {
  return {
    eps: {
      actual: earning.eps || 0,
      expected: earning.eps_estimate || earning.eps, // fallback
      surprise_pct: earning.eps_surprise || 0,
      status: getStatus(earning.eps_surprise)
    },
    // ...
  };
}

function getStatus(surprise: number | null): 'beat' | 'miss' | 'meet' {
  if (!surprise) return 'meet';
  if (surprise > 5) return 'beat';     // è¶…é¢„æœŸ>5%
  if (surprise < -5) return 'miss';    // ä½äºé¢„æœŸ>5%
  return 'meet';
}
```

#### Rechartsé…ç½®
```typescript
import { RadarChart, PolarGrid, PolarAngleAxis, PolarRadiusAxis, Radar, ResponsiveContainer, Tooltip } from 'recharts';

// æ•°æ®æ ¼å¼
const radarData = [
  { metric: 'EPS', actual: 120, expected: 100, fullMark: 150 },
  { metric: 'è¥æ”¶', actual: 98, expected: 100, fullMark: 150 },
  { metric: 'æ¯›åˆ©ç‡', actual: 110, expected: 100, fullMark: 150 },
  { metric: 'å‡€åˆ©æ¶¦', actual: 130, expected: 100, fullMark: 150 },
  { metric: 'ç°é‡‘æµ', actual: 105, expected: 100, fullMark: 150 },
];

// æ¸²æŸ“
<ResponsiveContainer width="100%" height={400}>
  <RadarChart data={radarData}>
    <PolarGrid stroke="var(--color-border)" />
    <PolarAngleAxis 
      dataKey="metric" 
      tick={{ fill: 'var(--color-text-secondary)', fontSize: 14 }}
    />
    <PolarRadiusAxis 
      angle={90} 
      domain={[0, 150]} 
      tick={false}
    />
    
    {/* é¢„æœŸå€¼ - è™šçº¿ */}
    <Radar
      name="é¢„æœŸå€¼"
      dataKey="expected"
      stroke="var(--color-text-tertiary)"
      strokeDasharray="4 4"
      fill="transparent"
    />
    
    {/* å®é™…å€¼ - å®çº¿+å¡«å…… */}
    <Radar
      name="å®é™…å€¼"
      dataKey="actual"
      stroke="var(--color-primary)"
      fill="var(--color-primary-light)"
      fillOpacity={0.5}
    />
    
    <Tooltip content={<CustomTooltip />} />
  </RadarChart>
</ResponsiveContainer>
```

### 2.3 æ•°æ®æ¨¡å‹

```sql
-- ç°æœ‰earningsè¡¨å­—æ®µå·²è¶³å¤Ÿ
-- éœ€è¦çš„å­—æ®µ:
-- - eps, eps_estimate, eps_surprise
-- - revenue, revenue_yoy_growth
-- - gross_margin (å¦‚æœ‰)
-- - net_income
-- - free_cash_flow (å¦‚æœ‰)

-- å¦‚å­—æ®µç¼ºå¤±ï¼Œå¯é€šè¿‡è„šæœ¬è®¡ç®—
-- gross_margin = (revenue - cogs) / revenue * 100
```

### 2.4 UIè®¾è®¡è§„èŒƒ

```typescript
// è¶…é¢„æœŸçŠ¶æ€æ ·å¼
const surpriseStyles = {
  beat: {
    fill: 'rgba(34, 197, 94, 0.3)',      // ç»¿è‰²åŠé€æ˜
    stroke: '#22c55e',
    icon: 'âœ“',
    label: 'è¶…é¢„æœŸ'
  },
  miss: {
    fill: 'rgba(239, 68, 68, 0.3)',      // çº¢è‰²åŠé€æ˜
    stroke: '#ef4444',
    icon: 'âœ—',
    label: 'ä½äºé¢„æœŸ'
  },
  meet: {
    fill: 'rgba(245, 158, 11, 0.3)',     // é»„è‰²åŠé€æ˜
    stroke: '#f59e0b',
    icon: 'â‰ˆ',
    label: 'ç¬¦åˆé¢„æœŸ'
  }
};

// ç»´åº¦é…ç½®
const dimensions = [
  { key: 'eps', label: 'æ¯è‚¡æ”¶ç›Š', unit: '$', icon: 'ğŸ’°' },
  { key: 'revenue', label: 'è¥æ”¶', unit: '$B', icon: 'ğŸ“ˆ' },
  { key: 'gross_margin', label: 'æ¯›åˆ©ç‡', unit: '%', icon: 'ğŸ“Š' },
  { key: 'net_income', label: 'å‡€åˆ©æ¶¦', unit: '$B', icon: 'ğŸ’µ' },
  { key: 'free_cash_flow', label: 'è‡ªç”±ç°é‡‘æµ', unit: '$B', icon: 'ğŸ’' }
];
```

### 2.5 æµ‹è¯•ç”¨ä¾‹

| ç”¨ä¾‹ID | åœºæ™¯ | é¢„æœŸç»“æœ | ä¼˜å…ˆçº§ |
|--------|------|---------|--------|
| TC-2.1 | AAPL Q1è´¢æŠ¥é›·è¾¾å›¾ | 5ä¸ªç»´åº¦æ­£ç¡®æ˜¾ç¤ºï¼ŒEPSè¶…é¢„æœŸåŒºåŸŸç»¿è‰² | P0 |
| TC-2.2 | æ•°æ®ç¼ºå¤±ç»´åº¦ | æ˜¾ç¤º"æ•°æ®ä¸å¯ç”¨"å ä½ç¬¦ | P1 |
| TC-2.3 | æ‚¬åœEPSç»´åº¦ | æ˜¾ç¤ºæµ®å±‚ï¼šå®é™…$2.18 vs é¢„æœŸ$1.95 | P0 |
| TC-2.4 | æ‰€æœ‰æŒ‡æ ‡è¶…é¢„æœŸ | å¡«å……åŒºåŸŸå…¨ç»¿è‰²ï¼Œæ˜¾ç¤º"å…¨é¢è¶…é¢„æœŸ"æ ‡ç­¾ | P1 |
| TC-2.5 | ç§»åŠ¨ç«¯æ˜¾ç¤º | é›·è¾¾å›¾è‡ªé€‚åº”ç¼©å°ï¼Œä¿æŒå¯è¯»æ€§ | P1 |

---

---

## åŠŸèƒ½6: "æˆ‘çš„æŒä»“"ä»ªè¡¨ç›˜ - è¯¦ç»†è®¾è®¡

### 6.1 äº§å“éœ€æ±‚æ–‡æ¡£ (PRD)

**åŠŸèƒ½åç§°**: æˆ‘çš„æŒä»“ä»ªè¡¨ç›˜ (My Portfolio Dashboard)  
**ç‰ˆæœ¬**: 1.0  
**çŠ¶æ€**: è§„åˆ’

#### ç”¨æˆ·æ•…äº‹
- ä½œä¸ºæŠ•èµ„è€…ï¼Œæˆ‘æƒ³æ·»åŠ è‡ªå·±çš„ç¾è‚¡æŒä»“ï¼Œåœ¨ä¸€ä¸ªåœ°æ–¹è·Ÿè¸ªæ‰€æœ‰ç›¸å…³è´¢æŠ¥
- ä½œä¸ºå¿™ç¢Œçš„ä¸“ä¸šäººå£«ï¼Œæˆ‘æƒ³æ”¶åˆ°æŒä»“å…¬å¸è´¢æŠ¥å‘å¸ƒçš„æé†’
- ä½œä¸ºé•¿æœŸæŠ•èµ„è€…ï¼Œæˆ‘æƒ³çœ‹åˆ°åŸºäºAIåˆ†æçš„æŒä»“å»ºè®®æ±‡æ€»
- ä½œä¸ºæ”¶ç›Šè¿½è¸ªè€…ï¼Œæˆ‘æƒ³çœ‹åˆ°æŒä»“çš„æ€»ç›ˆäºå’Œä¸ªè‚¡è¡¨ç°

#### åŠŸèƒ½éœ€æ±‚

**FR-6.1.1 æŒä»“ç®¡ç†**
- æ·»åŠ /åˆ é™¤æŒä»“è‚¡ç¥¨ï¼ˆè‚¡ç¥¨ä»£ç ã€æŒè‚¡æ•°ã€æˆæœ¬ä»·ã€ä¹°å…¥æ—¥æœŸï¼‰
- ç¼–è¾‘æŒä»“ä¿¡æ¯
- æ”¯æŒå¤šç¬”äº¤æ˜“è®°å½•ï¼ˆåŒä¸€è‚¡ç¥¨å¤šæ¬¡ä¹°å…¥ï¼‰

**FR-6.1.2 æŒä»“æ€»è§ˆ**
- æ˜¾ç¤ºæ€»æŒä»“å¸‚å€¼ã€æ€»æˆæœ¬ã€æ€»ç›ˆäºï¼ˆé‡‘é¢+ç™¾åˆ†æ¯”ï¼‰
- æ˜¾ç¤ºæŒä»“å…¬å¸æ•°é‡ã€ä»Šæ—¥è´¢æŠ¥æ•°é‡
- æŒä»“åˆ†å¸ƒå›¾è¡¨ï¼ˆæŒ‰è¡Œä¸š/å¸‚å€¼/æ”¶ç›Šè¡¨ç°ï¼‰

**FR-6.1.3 è´¢æŠ¥æ—¥å†**
- ä»…æ˜¾ç¤ºæŒä»“å…¬å¸çš„è´¢æŠ¥å‘å¸ƒæ—¥å†
- è´¢æŠ¥å‘å¸ƒå‰æé†’ï¼ˆæå‰1å¤©ã€3å¤©ã€1å‘¨å¯é€‰ï¼‰
- è´¢æŠ¥å‘å¸ƒåè‡ªåŠ¨æ ‡è®°å¹¶æ˜¾ç¤ºAIåˆ†ææ‘˜è¦

**FR-6.1.4 AIåˆ†ææ±‡æ€»**
- æ±‡æ€»æ‰€æœ‰æŒä»“å…¬å¸çš„æœ€æ–°AIåˆ†æ
- æŒ‰æƒ…ç»ªåˆ†ç±»ç»Ÿè®¡ï¼ˆç§¯æ/ä¸­æ€§/æ¶ˆææŒä»“å æ¯”ï¼‰
- å…³æ³¨è¦ç‚¹æç‚¼ï¼ˆAIåˆ†æä¸­çš„å…³é”®ä¿¡æ¯èšåˆï¼‰

**FR-6.1.5 æ”¶ç›Šç»Ÿè®¡**
- æŒä»“æ”¶ç›Šæ›²çº¿å›¾ï¼ˆæ—¥/å‘¨/æœˆ/å¹´ç»´åº¦ï¼‰
- ä¸ªè‚¡æ”¶ç›Šæ’å
- ä¸å¤§ç›˜æŒ‡æ•°å¯¹æ¯”ï¼ˆS&P 500, NASDAQï¼‰

#### éåŠŸèƒ½éœ€æ±‚
- æ•°æ®å®‰å…¨ï¼šæŒä»“æ•°æ®åŠ å¯†å­˜å‚¨
- å®æ—¶æ€§ï¼šè‚¡ä»·æ•°æ®å»¶è¿Ÿä¸è¶…è¿‡15åˆ†é’Ÿ
- æ€§èƒ½ï¼šé¡µé¢åŠ è½½ < 2ç§’

### 6.2 æŠ€æœ¯æ–¹æ¡ˆ

#### æ¶æ„è®¾è®¡
```
[Portfolio Dashboard Page]
    â”‚
    â”œâ”€> æŒä»“ç®¡ç†æ¨¡å—
    â”‚       â”œâ”€> AddPositionDialog (æ·»åŠ æŒä»“å¼¹çª—)
    â”‚       â”œâ”€> PositionList (æŒä»“åˆ—è¡¨)
    â”‚       â””â”€> PositionEditor (æŒä»“ç¼–è¾‘å™¨)
    â”‚
    â”œâ”€> æ•°æ®å±•ç¤ºæ¨¡å—
    â”‚       â”œâ”€> PortfolioOverview (æ€»è§ˆå¡ç‰‡)
    â”‚       â”œâ”€> ReturnsChart (æ”¶ç›Šæ›²çº¿)
    â”‚       â”œâ”€> EarningsCalendar (è´¢æŠ¥æ—¥å†)
    â”‚       â””â”€> AIAnalysisFeed (AIåˆ†ææµ)
    â”‚
    â”œâ”€> API Layer
    â”‚       â”œâ”€> /api/portfolio (CRUD)
    â”‚       â”œâ”€> /api/stock-prices (è‚¡ä»·)
    â”‚       â””â”€> /api/portfolio/returns (æ”¶ç›Šè®¡ç®—)
    â”‚
    â””â”€> æ•°æ®å­˜å‚¨
            â”œâ”€> user_portfolios è¡¨
            â”œâ”€> user_transactions è¡¨
            â””â”€> stock_prices è¡¨ (ç¼“å­˜)
```

#### APIè®¾è®¡
```typescript
// GET /api/portfolio
interface PortfolioResponse {
  positions: Array<{
    id: number;
    symbol: string;
    company_name: string;
    shares: number;
    avg_cost_basis: number;
    current_price: number;
    current_value: number;
    total_cost: number;
    unrealized_gain: number;
    unrealized_gain_pct: number;
    logo_url: string;
    last_updated: string;
  }>;
  summary: {
    total_value: number;
    total_cost: number;
    total_gain: number;
    total_gain_pct: number;
    position_count: number;
  };
}

// POST /api/portfolio
interface AddPositionRequest {
  symbol: string;
  shares: number;
  cost_basis: number;
  purchase_date?: string;
}

// GET /api/portfolio/earnings-calendar
interface PortfolioEarningsCalendar {
  upcoming: Array<{
    symbol: string;
    company_name: string;
    report_date: string;
    fiscal_quarter: string;
    has_analysis: boolean;
    days_until: number;
  }>;
  recent: Array<{
    symbol: string;
    report_date: string;
    ai_sentiment: 'positive' | 'neutral' | 'negative';
    ai_summary: string;
  }>;
}
```

#### ç»„ä»¶ç»“æ„
```typescript
// PortfolioDashboard.tsx (ä¸»é¡µé¢)
export default function PortfolioDashboard() {
  const { positions, summary, loading } = usePortfolio();
  
  return (
    <div className="space-y-6">
      <PortfolioSummaryCards summary={summary} />
      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <div className="lg:col-span-2">
          <PortfolioChart positions={positions} />
          <PositionsList positions={positions} />
        </div>
        <div className="space-y-6">
          <EarningsCalendar />
          <AIAnalysisSummary />
        </div>
      </div>
    </div>
  );
}
```

### 6.3 æ•°æ®æ¨¡å‹

```sql
-- ç”¨æˆ·æŒä»“è¡¨
CREATE TABLE user_portfolios (
  id SERIAL PRIMARY KEY,
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  symbol TEXT NOT NULL REFERENCES companies(symbol),
  total_shares DECIMAL(12,4) NOT NULL DEFAULT 0,
  avg_cost_basis DECIMAL(10,2) NOT NULL DEFAULT 0,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(user_id, symbol)
);

-- äº¤æ˜“è®°å½•è¡¨ï¼ˆæ”¯æŒå¤šæ¬¡ä¹°å–ï¼‰
CREATE TABLE user_transactions (
  id SERIAL PRIMARY KEY,
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  symbol TEXT NOT NULL REFERENCES companies(symbol),
  transaction_type TEXT NOT NULL CHECK (transaction_type IN ('buy', 'sell')),
  shares DECIMAL(12,4) NOT NULL,
  price_per_share DECIMAL(10,2) NOT NULL,
  transaction_date DATE NOT NULL DEFAULT CURRENT_DATE,
  notes TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- ç”¨æˆ·è®¾ç½®è¡¨
CREATE TABLE user_settings (
  user_id UUID PRIMARY KEY REFERENCES auth.users(id) ON DELETE CASCADE,
  notification_email BOOLEAN DEFAULT true,
  notification_push BOOLEAN DEFAULT false,
  alert_days_before_earnings INTEGER DEFAULT 3,
  alert_on_analysis_ready BOOLEAN DEFAULT true,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- è‚¡ç¥¨ä»·æ ¼ç¼“å­˜è¡¨ï¼ˆå‡å°‘APIè°ƒç”¨ï¼‰
CREATE TABLE stock_prices (
  symbol TEXT PRIMARY KEY REFERENCES companies(symbol),
  current_price DECIMAL(10,2) NOT NULL,
  previous_close DECIMAL(10,2),
  price_change_pct DECIMAL(5,2),
  last_updated TIMESTAMPTZ DEFAULT NOW(),
  data_source TEXT DEFAULT 'api'
);

-- ç´¢å¼•
CREATE INDEX idx_user_portfolios_user_id ON user_portfolios(user_id);
CREATE INDEX idx_user_transactions_user_symbol ON user_transactions(user_id, symbol);
```

### 6.4 UIè®¾è®¡è§„èŒƒ

```typescript
// æ”¶ç›Šé¢œè‰²
const returnColors = {
  positive: {
    text: 'text-emerald-400',
    bg: 'bg-emerald-500/10',
    border: 'border-emerald-500/30',
    icon: 'â†‘'
  },
  negative: {
    text: 'text-red-400',
    bg: 'bg-red-500/10',
    border: 'border-red-500/30',
    icon: 'â†“'
  }
};

// å¸ƒå±€è§„èŒƒ
const layout = {
  summaryCards: 'grid grid-cols-1 md:grid-cols-4 gap-4',
  mainContent: 'grid grid-cols-1 lg:grid-cols-3 gap-6',
  chartHeight: 'h-80',
  listMaxHeight: 'max-h-96 overflow-y-auto'
};
```

### 6.5 æµ‹è¯•ç”¨ä¾‹

| ç”¨ä¾‹ID | åœºæ™¯ | é¢„æœŸç»“æœ | ä¼˜å…ˆçº§ |
|--------|------|---------|--------|
| TC-6.1 | æ·»åŠ AAPLæŒä»“100è‚¡@$150 | æ˜¾ç¤ºåœ¨æŒä»“åˆ—è¡¨ï¼Œè®¡ç®—æ­£ç¡®æˆæœ¬ | P0 |
| TC-6.2 | æŸ¥çœ‹æŒä»“æ€»è§ˆ | æ˜¾ç¤ºæ€»å¸‚å€¼ã€æ€»æˆæœ¬ã€æ€»ç›ˆäº | P0 |
| TC-6.3 | AAPLè´¢æŠ¥å‘å¸ƒå‰3å¤© | æ”¶åˆ°é‚®ä»¶æé†’ | P1 |
| TC-6.4 | AIåˆ†æç”Ÿæˆå | æŒä»“é¡µé¢æ˜¾ç¤ºAIæ‘˜è¦ | P0 |
| TC-6.5 | åˆ é™¤æŒä»“ | ä»åˆ—è¡¨ç§»é™¤ï¼Œæ•°æ®æ¸…ç©º | P0 |

---

## åŠŸèƒ½8: AIæŠ•èµ„å¤‡å¿˜å½• - è¯¦ç»†è®¾è®¡

### 8.1 äº§å“éœ€æ±‚æ–‡æ¡£ (PRD)

**åŠŸèƒ½åç§°**: AIæŠ•èµ„å¤‡å¿˜å½• (AI Investment Notes)  
**ç‰ˆæœ¬**: 1.0  
**çŠ¶æ€**: å·²å®ç°ï¼ˆMVPï¼‰

#### ç”¨æˆ·æ•…äº‹
- ä½œä¸ºæŠ•èµ„è€…ï¼Œæˆ‘æƒ³è®°å½•å¯¹æŸä»½è´¢æŠ¥çš„ä¸ªäººè§‚ç‚¹å’ŒæŠ•èµ„é€»è¾‘
- ä½œä¸ºå­¦ä¹ è€…ï¼Œæˆ‘æƒ³AIèƒ½å¸®åŠ©æˆ‘æ€»ç»“ç¬”è®°ä¸­çš„å…³é”®å†³ç­–ç‚¹
- ä½œä¸ºå¤ç›˜è€…ï¼Œæˆ‘æƒ³è·¨å­£åº¦æœç´¢è‡ªå·±çš„ç¬”è®°ï¼Œå‘ç°è®¤çŸ¥æ¨¡å¼

#### åŠŸèƒ½éœ€æ±‚

**FR-8.1.1 ç¬”è®°ç¼–è¾‘**
- è´¢æŠ¥è¯¦æƒ…é¡µä¾§è¾¹æ ç¬”è®°åŒº
- æ”¯æŒMarkdownæ ¼å¼ï¼ˆæ ‡é¢˜ã€åˆ—è¡¨ã€åŠ ç²—ç­‰åŸºç¡€è¯­æ³•ï¼‰
- è‡ªåŠ¨ä¿å­˜ï¼ˆæ¯30ç§’æˆ–å¤±ç„¦æ—¶ï¼‰

**FR-8.1.2 AIè¾…åŠ©**
- AIè‡ªåŠ¨æå–ç¬”è®°å…³é”®è¯å’Œæ ‡ç­¾
- ç¬”è®°ä¸AIåˆ†æè‡ªåŠ¨å…³è”ï¼ˆç›¸ä¼¼è§‚ç‚¹é«˜äº®æ˜¾ç¤ºï¼‰
- AIç”Ÿæˆç¬”è®°æ‘˜è¦ï¼ˆ3-5ä¸ªè¦ç‚¹ï¼‰

**FR-8.1.3 ç¬”è®°ç®¡ç†**
- è·¨è´¢æŠ¥æœç´¢ä¸ªäººç¬”è®°
- æŒ‰æ ‡ç­¾ç­›é€‰ç¬”è®°
- ç¬”è®°å¯¼å‡ºï¼ˆMarkdown/PDFï¼‰

**FR-8.1.4 å†³ç­–è¿½è¸ª**
- æ ‡è®°æŠ•èµ„æ“ä½œï¼ˆä¹°å…¥/å–å‡º/æŒæœ‰ï¼‰
- è®°å½•å†³ç­–ç†ç”±
- åç»­éªŒè¯ï¼ˆæ ‡è®°å†³ç­–æ˜¯å¦æ­£ç¡®ï¼‰

### 8.2 æŠ€æœ¯æ–¹æ¡ˆ

#### æ¶æ„è®¾è®¡
```
[Earnings Detail Page]
    â”‚
    â”œâ”€> AIåˆ†æåŒºåŸŸ
    â”‚
    â”œâ”€> æŠ•èµ„å¤‡å¿˜å½•ä¾§è¾¹æ 
    â”‚       â”œâ”€> NoteEditor (ç¼–è¾‘å™¨)
    â”‚       â”‚       â”œâ”€> MarkdownInput
    â”‚       â”‚       â””â”€> AutoSave
    â”‚       â”‚
    â”‚       â”œâ”€> AIAssistPanel
    â”‚       â”‚       â”œâ”€> TagExtractor
    â”‚       â”‚       â”œâ”€> SummaryGenerator
    â”‚       â”‚       â””â”€> AISimilarityHighlight
    â”‚       â”‚
    â”‚       â””â”€> NoteHistory (å†å²ç‰ˆæœ¬)
    â”‚
    â””â”€> API Layer
            â”œâ”€> /api/notes (CRUD)
            â”œâ”€> /api/notes/search (è¯­ä¹‰/å…³é”®è¯æ£€ç´¢)
            â”œâ”€> /api/notes/[noteId]/versions (å†å²ç‰ˆæœ¬)
            â””â”€> /api/notes/[noteId]/restore (ç‰ˆæœ¬æ¢å¤)
```

#### APIè®¾è®¡
```typescript
// GET /api/notes?user_id=1&earning_id=123
interface NoteDetailResponse {
  note: {
    id: number;
    user_id: number;
    earning_id: number;
    symbol: string;
    content: string;
    tags: string[];
    latest_version: number;
    created_at: string;
    updated_at: string;
  } | null;
  versions: Array<{
    id: number;
    note_id: number;
    version: number;
    content: string;
    tags: string[];
    ai_alignment_score: number | null;
    ai_alignment_summary: string | null;
    created_at: string;
  }>;
}

// POST /api/notes
interface SaveNoteRequest {
  user_id: number;
  earning_id: number;
  content: string;
}

// GET /api/notes/search?user_id=1&q=ä¼°å€¼&symbol=AAPL
interface SearchNotesResponse {
  results: Array<{
    noteId: number;
    earningId: number;
    symbol: string;
    snippet: string;
    tags: string[];
    similarity: number | null;
    updatedAt: string;
  }>;
}
```

#### å‘é‡ç›¸ä¼¼åº¦å®ç°
```typescript
// ç¬”è®°ä¸AIåˆ†æä¸Šä¸‹æ–‡çš„ä¸€è‡´åº¦ï¼ˆå½“å‰å®ç°ï¼‰
async function computeNoteAlignment(noteContent: string, aiContext: string): Promise<number> {
  const [noteEmbedding, aiContextEmbedding] = await Promise.all([
    generateTextEmbedding(noteContent),
    generateTextEmbedding(aiContext),
  ]);
  return cosineSimilarity(noteEmbedding, aiContextEmbedding); // 0-1
}
```

### 8.3 æ•°æ®æ¨¡å‹

```sql
-- å½“å‰è¡¨ç»“æ„ï¼ˆsupabase/migrations/016-user-notes.sqlï¼‰
CREATE TABLE user_notes (
  id SERIAL PRIMARY KEY,
  user_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  earning_id INTEGER NOT NULL REFERENCES earnings(id) ON DELETE CASCADE,
  symbol VARCHAR(20) NOT NULL REFERENCES companies(symbol),
  content TEXT NOT NULL,
  tags TEXT[] NOT NULL DEFAULT '{}',
  latest_version INTEGER NOT NULL DEFAULT 1,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  UNIQUE(user_id, earning_id)
);

CREATE TABLE user_note_versions (
  id SERIAL PRIMARY KEY,
  note_id INTEGER NOT NULL REFERENCES user_notes(id) ON DELETE CASCADE,
  version INTEGER NOT NULL,
  content TEXT NOT NULL,
  tags TEXT[] NOT NULL DEFAULT '{}',
  ai_alignment_score NUMERIC(5, 4),
  ai_alignment_summary TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  UNIQUE(note_id, version)
);

CREATE TABLE user_note_embeddings (
  id SERIAL PRIMARY KEY,
  note_id INTEGER NOT NULL UNIQUE REFERENCES user_notes(id) ON DELETE CASCADE,
  embedding vector(1536) NOT NULL,
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

### 8.4 UIè®¾è®¡è§„èŒƒ

```typescript
// ç¼–è¾‘å™¨æ ·å¼
const editorStyles = {
  container: 'h-full flex flex-col border-l border-border bg-surface',
  header: 'p-4 border-b border-border flex items-center justify-between',
  textarea: 'flex-1 p-4 bg-transparent resize-none focus:outline-none font-mono text-sm',
  footer: 'p-4 border-t border-border text-xs text-text-tertiary'
};

// AIå…³è”æç¤ºæ ·å¼
const similarityStyles = {
  high: { color: 'text-emerald-400', label: 'ä¸AIåˆ†æé«˜åº¦ä¸€è‡´' },
  medium: { color: 'text-amber-400', label: 'ä¸AIåˆ†æéƒ¨åˆ†ä¸€è‡´' },
  low: { color: 'text-red-400', label: 'ä¸AIåˆ†æè§‚ç‚¹ä¸åŒ' }
};
```

---

## åŠŸèƒ½10: WallStreetBets æƒ…ç»ªè¿½è¸ª - è¯¦ç»†è®¾è®¡

### 10.1 äº§å“éœ€æ±‚æ–‡æ¡£ (PRD)

**åŠŸèƒ½åç§°**: WSBæƒ…ç»ªè¿½è¸ª (WSB Sentiment Tracker)  
**ç‰ˆæœ¬**: 1.0  
**çŠ¶æ€**: è§„åˆ’

#### ç”¨æˆ·æ•…äº‹
- ä½œä¸ºæŠ•èµ„è€…ï¼Œæˆ‘æƒ³äº†è§£æ•£æˆ·å¯¹æŸåªè‚¡ç¥¨çš„æƒ…ç»ªï¼Œä½œä¸ºåå‘æŒ‡æ ‡
- ä½œä¸ºå¸‚åœºè§‚å¯Ÿè€…ï¼Œæˆ‘æƒ³æ•æ‰æç«¯æƒ…ç»ªä¿¡å·ï¼ˆææ…Œ/è´ªå©ªï¼‰
- ä½œä¸ºå†…å®¹æ¶ˆè´¹è€…ï¼Œæˆ‘æƒ³çœ‹WSBçƒ­é—¨å¸–å­ä¸­æ–‡æ‘˜è¦

#### åŠŸèƒ½éœ€æ±‚

**FR-10.1.1 æƒ…ç»ªä»ªè¡¨ç›˜**
- å®æ—¶æ˜¾ç¤ºWSBå¯¹ç‰¹å®šè‚¡ç¥¨çš„è®¨è®ºæƒ…ç»ªæŒ‡æ•°ï¼ˆ0-100ï¼‰
- æƒ…ç»ªåˆ†ç±»ï¼šæåº¦çœ‹è·Œ/çœ‹è·Œ/ä¸­æ€§/çœ‹æ¶¨/æåº¦çœ‹æ¶¨
- 24å°æ—¶/7å¤©/30å¤©æƒ…ç»ªè¶‹åŠ¿å›¾

**FR-10.1.2 çƒ­åº¦æŒ‡æ ‡**
- 24å°æ—¶æåŠæ¬¡æ•°ç»Ÿè®¡
- ç‚¹èµ/è¯„è®ºæ´»è·ƒåº¦æŒ‡æ ‡
- çƒ­åº¦æ’åï¼ˆåœ¨WSBä¸­çš„çƒ­é—¨ç¨‹åº¦ï¼‰

**FR-10.1.3 çƒ­é—¨å¸–å­**
- èšåˆWSBä¸­æåŠè¯¥è‚¡ç¥¨çš„çƒ­é—¨å¸–å­
- AIç”Ÿæˆä¸­æ–‡æ‘˜è¦ï¼ˆä¿ç•™åŸæ–‡é“¾æ¥ï¼‰
- æŒ‰æƒ…ç»ªè¿‡æ»¤å¸–å­ï¼ˆåªçœ‹çœ‹æ¶¨/çœ‹è·Œï¼‰

**FR-10.1.4 æç«¯æƒ…ç»ªé¢„è­¦**
- å½“æƒ…ç»ª>90%æˆ–<-90%æ—¶æ˜¾ç¤ºè­¦å‘Š
- å†å²æç«¯æƒ…ç»ªäº‹ä»¶å›é¡¾
- æç«¯æƒ…ç»ªåçš„è‚¡ä»·è¡¨ç°ç»Ÿè®¡

### 10.2 æŠ€æœ¯æ–¹æ¡ˆ

#### æ•°æ®é‡‡é›†æ¶æ„
```
[Reddit WSB]
    â”‚
    â”œâ”€> Reddit API (PRAW)
    â”‚       â”œâ”€> Hot Posts æŠ“å– (æ¯å°æ—¶)
    â”‚       â”œâ”€> New Posts æŠ“å– (æ¯15åˆ†é’Ÿ)
    â”‚       â””â”€> Comments æŠ“å– (æ¯å°æ—¶)
    â”‚
    â”œâ”€> æ•°æ®å¤„ç†å™¨
    â”‚       â”œâ”€> è‚¡ç¥¨ä»£ç æå– (NLP)
    â”‚       â”œâ”€> æƒ…ç»ªåˆ†ææ¨¡å‹
    â”‚       â””â”€> çƒ­åº¦è®¡ç®—
    â”‚
    â””â”€> æ•°æ®å­˜å‚¨
            â”œâ”€> wsb_posts è¡¨
            â”œâ”€> wsb_sentiment è¡¨
            â””â”€> wsb_mentions è¡¨
```

#### æƒ…ç»ªåˆ†æå®ç°
```typescript
// ä½¿ç”¨DeepSeek APIè¿›è¡Œæƒ…ç»ªåˆ†æ
async function analyzeWSBSentiment(posts: RedditPost[]): Promise<SentimentResult> {
  const prompt = `
    åˆ†æä»¥ä¸‹Redditå¸–å­çš„æŠ•èµ„æƒ…ç»ªï¼Œé’ˆå¯¹è‚¡ç¥¨ ${symbol}ï¼š
    ${posts.map(p => `- ${p.title}: ${p.selftext.slice(0, 200)}`).join('\n')}
    
    è¯·è¿”å›JSONæ ¼å¼ï¼š
    {
      "overall_sentiment": "bullish" | "bearish" | "neutral",
      "sentiment_score": 0-100,  // 50ä¸ºä¸­æ€§ï¼Œ>50çœ‹æ¶¨ï¼Œ<50çœ‹è·Œ
      "confidence": 0-100,
      "key_themes": ["ä¸»é¢˜1", "ä¸»é¢˜2"],
      "extreme_indicators": ["è¿‡åº¦ä¹è§‚", "ææ…Œ"] // å¦‚æœ‰
    }
  `;
  
  const response = await deepseek.chat.completions.create({
    model: 'deepseek-chat',
    messages: [{ role: 'user', content: prompt }],
    response_format: { type: 'json_object' }
  });
  
  return JSON.parse(response.choices[0].message.content);
}
```

#### APIè®¾è®¡
```typescript
// GET /api/wsb/sentiment?symbol=AAPL
interface WSBSentimentResponse {
  symbol: string;
  sentiment_score: number;      // 0-100
  sentiment_label: 'extreme_fear' | 'fear' | 'neutral' | 'greed' | 'extreme_greed';
  mentions_24h: number;
  mentions_7d: number;
  trending_rank: number;        // åœ¨WSBä¸­çš„çƒ­åº¦æ’å
  last_updated: string;
  
  trend: Array<{
    date: string;
    score: number;
    mentions: number;
  }>;
  
  top_posts: Array<{
    id: string;
    title: string;
    chinese_summary: string;
    sentiment: 'bullish' | 'bearish' | 'neutral';
    upvotes: number;
    comments: number;
    reddit_url: string;
    created_at: string;
  }>;
}
```

### 10.3 æ•°æ®æ¨¡å‹

```sql
-- WSBå¸–å­è¡¨
CREATE TABLE wsb_posts (
  id TEXT PRIMARY KEY,  -- Reddit post ID
  title TEXT NOT NULL,
  selftext TEXT,
  author TEXT,
  upvotes INTEGER DEFAULT 0,
  comments_count INTEGER DEFAULT 0,
  upvote_ratio DECIMAL(3,2),
  created_at TIMESTAMPTZ,
  scraped_at TIMESTAMPTZ DEFAULT NOW(),
  chinese_summary TEXT,
  sentiment TEXT CHECK (sentiment IN ('bullish', 'bearish', 'neutral'))
);

-- WSBè‚¡ç¥¨æåŠè¡¨
CREATE TABLE wsb_mentions (
  id SERIAL PRIMARY KEY,
  post_id TEXT REFERENCES wsb_posts(id) ON DELETE CASCADE,
  symbol TEXT REFERENCES companies(symbol),
  mentioned_at TIMESTAMPTZ,  -- å¸–å­åˆ›å»ºæ—¶é—´
  scraped_at TIMESTAMPTZ DEFAULT NOW()
);

-- WSBæƒ…ç»ªç»Ÿè®¡è¡¨ï¼ˆæŒ‰æ—¥æ±‡æ€»ï¼‰
CREATE TABLE wsb_sentiment_daily (
  id SERIAL PRIMARY KEY,
  symbol TEXT REFERENCES companies(symbol),
  date DATE NOT NULL,
  sentiment_score DECIMAL(5,2),  -- 0-100
  mentions_count INTEGER DEFAULT 0,
  avg_upvotes DECIMAL(10,2),
  top_themes TEXT[],
  UNIQUE(symbol, date)
);

-- ç´¢å¼•
CREATE INDEX idx_wsb_mentions_symbol ON wsb_mentions(symbol);
CREATE INDEX idx_wsb_mentions_post ON wsb_mentions(post_id);
CREATE INDEX idx_wsb_sentiment_daily_symbol_date ON wsb_sentiment_daily(symbol, date);
```

### 10.4 å…è´£å£°æ˜è®¾è®¡
```typescript
const Disclaimer = () => (
  <div className="p-4 bg-warning/10 border border-warning/30 rounded-lg">
    <p className="text-sm text-warning">
      <strong>âš ï¸ é£é™©æç¤ºï¼š</strong>
      WallStreetBetsæƒ…ç»ªä»…ä½œå‚è€ƒï¼Œåæ˜ æ•£æˆ·æŠ•èµ„è€…æƒ…ç»ªï¼Œä¸ä»£è¡¨ä¸“ä¸šè§‚ç‚¹ã€‚
      å†å²æ•°æ®æ˜¾ç¤ºï¼ŒWSBæåº¦çœ‹æ¶¨æ—¶å¾€å¾€ä¼´éšçŸ­æœŸé¡¶éƒ¨ã€‚
      ä¸æ„æˆæŠ•èµ„å»ºè®®ï¼Œè¯·ç‹¬ç«‹åˆ¤æ–­ã€‚
    </p>
  </div>
);
```

---

## åŠŸèƒ½17: 3Dè´¢æŠ¥å¡ç‰‡ç¿»è½¬ - è¯¦ç»†è®¾è®¡

### 17.1 äº§å“éœ€æ±‚æ–‡æ¡£ (PRD)

**åŠŸèƒ½åç§°**: 3Dè´¢æŠ¥å¡ç‰‡ç¿»è½¬ (3D Earnings Flip Card)  
**ç‰ˆæœ¬**: 1.0  
**çŠ¶æ€**: è§„åˆ’

#### ç”¨æˆ·æ•…äº‹
- ä½œä¸ºé¦–é¡µè®¿å®¢ï¼Œæˆ‘æƒ³å¿«é€Ÿæµè§ˆå¤šå®¶å…¬å¸çš„æ ¸å¿ƒä¿¡æ¯
- ä½œä¸ºæŠ•èµ„è€…ï¼Œæˆ‘æƒ³åœ¨ä¸è·³è½¬é¡µé¢çš„æƒ…å†µä¸‹é¢„è§ˆè´¢æŠ¥æ•°æ®

#### åŠŸèƒ½éœ€æ±‚

**FR-17.1.1 æ­£é¢å±•ç¤º**
- å…¬å¸Logoï¼ˆClearbit APIè·å–ï¼‰
- å…¬å¸åç§°å’Œè‚¡ç¥¨ä»£ç 
- æœ€æ–°è‚¡ä»·å’Œå½“æ—¥æ¶¨è·Œ
- å¸‚å€¼ï¼ˆå¯é€‰ï¼‰

**FR-17.1.2 èƒŒé¢å±•ç¤º**
- æœ€æ–°è´¢æŠ¥å­£åº¦æ ‡è¯†
- AIæƒ…ç»ªï¼ˆç§¯æ/ä¸­æ€§/æ¶ˆæï¼‰
- æ ¸å¿ƒæŒ‡æ ‡ï¼šEPSã€è¥æ”¶ã€åŒæ¯”å¢é•¿
- AIè§‚ç‚¹æ‘˜è¦ï¼ˆ1å¥è¯ï¼‰
- æŸ¥çœ‹è¯¦æƒ…æŒ‰é’®

**FR-17.1.3 3Dç¿»è½¬æ•ˆæœ**
- CSS 3D transformå®ç°ç¿»è½¬
- é¼ æ ‡æ‚¬åœè§¦å‘ï¼ˆæ¡Œé¢ç«¯ï¼‰
- ç‚¹å‡»è§¦å‘ï¼ˆç§»åŠ¨ç«¯ï¼‰
- ç¿»è½¬åŠ¨ç”»æ—¶é•¿ 600ms

### 17.2 æŠ€æœ¯æ–¹æ¡ˆ

#### ç»„ä»¶å®ç°
```typescript
// FlipCard.tsx
'use client';

import { useState } from 'react';
import { cn } from '@/lib/utils';

interface FlipCardProps {
  front: React.ReactNode;
  back: React.ReactNode;
  className?: string;
}

export function FlipCard({ front, back, className }: FlipCardProps) {
  const [isFlipped, setIsFlipped] = useState(false);
  
  return (
    <div 
      className={cn(
        'relative w-full h-64 perspective-1000',
        className
      )}
      onMouseEnter={() => setIsFlipped(true)}
      onMouseLeave={() => setIsFlipped(false)}
      onClick={() => setIsFlipped(!isFlipped)} // ç§»åŠ¨ç«¯æ”¯æŒ
    >
      <div className={cn(
        'relative w-full h-full transition-transform duration-600',
        'transform-style-preserve-3d',
        isFlipped && 'rotate-y-180'
      )}>
        {/* æ­£é¢ */}
        <div className="absolute inset-0 backface-hidden">
          {front}
        </div>
        
        {/* èƒŒé¢ */}
        <div className="absolute inset-0 backface-hidden rotate-y-180">
          {back}
        </div>
      </div>
    </div>
  );
}
```

#### CSSæ ·å¼
```css
/* flip-card.css */
.perspective-1000 {
  perspective: 1000px;
}

.transform-style-preserve-3d {
  transform-style: preserve-3d;
}

.backface-hidden {
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

.rotate-y-180 {
  transform: rotateY(180deg);
}

.duration-600 {
  transition-duration: 600ms;
}
```

### 17.3 ç»„ä»¶ä½¿ç”¨ç¤ºä¾‹
```typescript
// CompanyFlipCard.tsx
export function CompanyFlipCard({ company }: { company: Company }) {
  return (
    <FlipCard
      front={<CompanyFront company={company} />}
      back={<CompanyBack company={company} />}
    />
  );
}

function CompanyFront({ company }: { company: Company }) {
  return (
    <Card className="h-full flex flex-col items-center justify-center p-6 bg-surface border-border">
      <CompanyLogo symbol={company.symbol} size="lg" />
      <h3 className="mt-4 text-xl font-bold text-white">{company.symbol}</h3>
      <p className="text-sm text-text-secondary">{company.name}</p>
      <div className="mt-4 text-center">
        <span className="text-2xl font-bold text-white">${company.current_price}</span>
        <span className={cn(
          'ml-2 text-sm',
          company.price_change >= 0 ? 'text-emerald-400' : 'text-red-400'
        )}>
          {company.price_change >= 0 ? '+' : ''}{company.price_change_pct}%
        </span>
      </div>
    </Card>
  );
}

function CompanyBack({ company }: { company: Company }) {
  const latestEarning = company.latest_earning;
  
  return (
    <Card className="h-full flex flex-col p-6 bg-surface border-border">
      <div className="flex items-center justify-between mb-4">
        <span className="text-sm text-text-secondary">
          æœ€æ–°è´¢æŠ¥ {latestEarning?.fiscal_quarter}
        </span>
        <SentimentBadge sentiment={latestEarning?.ai_sentiment} />
      </div>
      
      <div className="space-y-2 flex-1">
        <MetricRow label="EPS" value={latestEarning?.eps} change={latestEarning?.eps_surprise} />
        <MetricRow label="è¥æ”¶" value={formatRevenue(latestEarning?.revenue)} />
        <MetricRow label="åŒæ¯”å¢é•¿" value={`${latestEarning?.revenue_yoy_growth}%`} />
      </div>
      
      <p className="mt-4 text-sm text-text-secondary line-clamp-2">
        {latestEarning?.ai_summary}
      </p>
      
      <Button className="mt-4 w-full" variant="outline" size="sm">
        æŸ¥çœ‹å®Œæ•´åˆ†æ â†’
      </Button>
    </Card>
  );
}
```

### 17.4 æ€§èƒ½ä¼˜åŒ–
```typescript
// ä½¿ç”¨will-changeä¼˜åŒ–åŠ¨ç”»æ€§èƒ½
const flipCardStyles = {
  container: 'will-change-transform',
  front: 'will-change-transform backface-hidden',
  back: 'will-change-transform backface-hidden'
};

// ç§»åŠ¨ç«¯ç®€åŒ–åŠ¨ç”»
const isTouchDevice = 'ontouchstart' in window;
const animationDuration = isTouchDevice ? '300ms' : '600ms';
```

---

## åŠŸèƒ½18: åŠ¨æ€æ•°æ®æµèƒŒæ™¯ - è¯¦ç»†è®¾è®¡

### 18.1 äº§å“éœ€æ±‚æ–‡æ¡£ (PRD)

**åŠŸèƒ½åç§°**: åŠ¨æ€æ•°æ®æµèƒŒæ™¯ (Live Data Stream Background)  
**ç‰ˆæœ¬**: 1.0  
**çŠ¶æ€**: è§„åˆ’

#### åŠŸèƒ½éœ€æ±‚

**FR-18.1.1 æ•°æ®æµå±•ç¤º**
- Canvasç»˜åˆ¶çš„åŠ¨æ€æ•°æ®æµ
- ç²’å­åŒ…å«ï¼šè‚¡ç¥¨ä»£ç ã€è¥æ”¶æ•°å­—ã€EPSã€æƒ…ç»ªè¡¨æƒ…
- ä»å±å¹•é¡¶éƒ¨å‘åº•éƒ¨æµåŠ¨
- æµåŠ¨é€Ÿåº¦éšæœº

**FR-18.1.2 è§†è§‰æ•ˆæœ**
- ä½é€æ˜åº¦ï¼ˆ10-20%ï¼‰ï¼Œä¸å¹²æ‰°å‰æ™¯å†…å®¹
- æš—è‰²ä¸»é¢˜ï¼Œä½¿ç”¨ç°æœ‰è®¾è®¡ç³»ç»Ÿé¢œè‰²
- é¼ æ ‡ç§»åŠ¨äº§ç”Ÿè½»å¾®è§†å·®æ•ˆæœ

**FR-18.1.3 æ€§èƒ½ä¼˜åŒ–**
- ä½¿ç”¨requestAnimationFrame
- ç²’å­æ•°é‡æ§åˆ¶åœ¨50-100ä¸ª
- ç§»åŠ¨ç«¯è‡ªåŠ¨ç¦ç”¨æˆ–ç®€åŒ–

### 18.2 æŠ€æœ¯æ–¹æ¡ˆ

#### Canvaså®ç°
```typescript
// DataStreamBackground.tsx
'use client';

import { useEffect, useRef } from 'react';

interface DataParticle {
  x: number;
  y: number;
  text: string;
  speed: number;
  opacity: number;
  fontSize: number;
}

export function DataStreamBackground() {
  const canvasRef = useRef<HTMLCanvasElement>(null);
  const particlesRef = useRef<DataParticle[]>([]);
  const animationRef = useRef<number>();
  
  useEffect(() => {
    const canvas = canvasRef.current;
    if (!canvas) return;
    
    const ctx = canvas.getContext('2d');
    if (!ctx) return;
    
    // è®¾ç½®ç”»å¸ƒå°ºå¯¸
    const resize = () => {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    };
    resize();
    window.addEventListener('resize', resize);
    
    // åˆå§‹åŒ–ç²’å­
    const initParticles = () => {
      const symbols = ['AAPL', 'MSFT', 'NVDA', 'GOOGL', 'AMZN', 'META', 'TSLA'];
      const revenues = ['$120B', '$65B', '$25B', '$85B', '$170B', '$40B', '$95B'];
      const sentiments = ['ğŸŸ¢', 'ğŸŸ¡', 'ğŸ”´'];
      
      particlesRef.current = Array.from({ length: 60 }, (_, i) => ({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        text: `${symbols[i % symbols.length]} ${revenues[i % revenues.length]} ${sentiments[i % sentiments.length]}`,
        speed: 0.5 + Math.random() * 1.5,
        opacity: 0.1 + Math.random() * 0.15,
        fontSize: 12 + Math.random() * 8
      }));
    };
    initParticles();
    
    // åŠ¨ç”»å¾ªç¯
    const animate = () => {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      particlesRef.current.forEach(particle => {
        // æ›´æ–°ä½ç½®
        particle.y += particle.speed;
        
        // é‡ç½®åˆ°é¡¶éƒ¨
        if (particle.y > canvas.height + 50) {
          particle.y = -50;
          particle.x = Math.random() * canvas.width;
        }
        
        // ç»˜åˆ¶
        ctx.font = `${particle.fontSize}px monospace`;
        ctx.fillStyle = `rgba(99, 102, 241, ${particle.opacity})`;
        ctx.fillText(particle.text, particle.x, particle.y);
      });
      
      animationRef.current = requestAnimationFrame(animate);
    };
    
    animate();
    
    return () => {
      window.removeEventListener('resize', resize);
      if (animationRef.current) {
        cancelAnimationFrame(animationRef.current);
      }
    };
  }, []);
  
  return (
    <canvas
      ref={canvasRef}
      className="fixed inset-0 pointer-events-none z-0"
      style={{ opacity: 0.6 }}
    />
  );
}
```

### 18.3 å“åº”å¼å¤„ç†
```typescript
// æ£€æµ‹è®¾å¤‡ç±»å‹
const useDeviceType = () => {
  const [isMobile, setIsMobile] = useState(false);
  
  useEffect(() => {
    const checkMobile = () => {
      setIsMobile(window.innerWidth < 768 || 'ontouchstart' in window);
    };
    checkMobile();
    window.addEventListener('resize', checkMobile);
    return () => window.removeEventListener('resize', checkMobile);
  }, []);
  
  return { isMobile };
};

// ä¸»ç»„ä»¶
export function DataStreamBackground() {
  const { isMobile } = useDeviceType();
  
  // ç§»åŠ¨ç«¯ä¸æ¸²æŸ“
  if (isMobile) {
    return <div className="fixed inset-0 bg-gradient-to-b from-background to-surface z-0" />;
  }
  
  return <CanvasDataStream />;
}
```

### 18.4 æ— éšœç¢æ”¯æŒ
```typescript
// æ£€æµ‹ç”¨æˆ·åå¥½
const usePrefersReducedMotion = () => {
  const [prefersReduced, setPrefersReduced] = useState(false);
  
  useEffect(() => {
    const mediaQuery = window.matchMedia('(prefers-reduced-motion: reduce)');
    setPrefersReduced(mediaQuery.matches);
    
    const handler = (e: MediaQueryListEvent) => setPrefersReduced(e.matches);
    mediaQuery.addEventListener('change', handler);
    return () => mediaQuery.removeEventListener('change', handler);
  }, []);
  
  return prefersReduced;
};

// åº”ç”¨
export function DataStreamBackground() {
  const prefersReduced = usePrefersReducedMotion();
  
  if (prefersReduced) {
    return <StaticBackground />; // é™æ€èƒŒæ™¯
  }
  
  return <CanvasDataStream />;
}
```

---

# ğŸ“Š å®ç°è·¯çº¿å›¾æ±‡æ€»

## Phase 1: å¿«é€Ÿèƒœåˆ© (Week 1)
- âœ… åŠŸèƒ½17: 3Dè´¢æŠ¥å¡ç‰‡ç¿»è½¬ (6h)
- âœ… åŠŸèƒ½18: åŠ¨æ€æ•°æ®æµèƒŒæ™¯ (8h)

## Phase 2: æ•°æ®å¯è§†åŒ– (Week 2)
- âœ… åŠŸèƒ½1: è´¢æŠ¥æƒ…ç»ªæ—¶é—´è½´ (8h)
- âœ… åŠŸèƒ½2: "è¶…é¢„æœŸ"é›·è¾¾ (12h)

## Phase 3: ç”¨æˆ·ç³»ç»Ÿ (Week 3-4)
- âœ… åŠŸèƒ½8: AIæŠ•èµ„å¤‡å¿˜å½• (16h)
- ğŸŸ¡ åŠŸèƒ½6: æˆ‘çš„æŒä»“ä»ªè¡¨ç›˜ (24h)

## Phase 4: å¤–éƒ¨æ•°æ® (Week 5)
- â³ åŠŸèƒ½10: WSBæƒ…ç»ªè¿½è¸ª (20h)

**æ€»è®¡**: ~94å°æ—¶ (~12äººå¤©)

---

*æ–‡æ¡£å®Œæˆ: 2026-02-16*  
*ç‰ˆæœ¬: 1.0*  
*åŒ…å«: 7ä¸ªåŠŸèƒ½çš„å®Œæ•´PRDã€æŠ€æœ¯æ–¹æ¡ˆã€æ•°æ®æ¨¡å‹ã€UIè®¾è®¡ã€æµ‹è¯•ç”¨ä¾‹*
